!function(t,e,n,i,o){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof r[i]&&r[i],c=a.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(e,n){if(!c[e]){if(!t[e]){var o="function"==typeof r[i]&&r[i];if(!n&&o)return o(e,!0);if(a)return a(e,!0);if(s&&"string"==typeof e)return s(e);var u=new Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}d.resolve=function(n){var i=t[e][1][n];return null!=i?i:n},d.cache={};var f=c[e]=new l.Module(e);t[e][0].call(f.exports,d,f,f.exports,this)}return c[e].exports;function d(t){var e=d.resolve(t);return!1===e?{}:l(e)}}l.isParcelRequire=!0,l.Module=function(t){this.id=t,this.bundle=l,this.exports={}},l.modules=t,l.cache=c,l.parent=a,l.register=function(e,n){t[e]=[function(t,e){e.exports=n},{}]},Object.defineProperty(l,"root",{get:function(){return r[i]}}),r[i]=l;for(var u=0;u<e.length;u++)l(e[u]);if(n){var f=l(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof define&&define.amd&&define((function(){return f}))}}({fFZjD:[function(t,e,n){t("8c44530950ae97e8").register(JSON.parse('{"8jT0s":"index.b24d7188.js","7EvNo":"pose_landmark_full.1f8ddae2.tflite","1hXGG":"pose_solution_packed_assets_loader.bd8a3295.sj","eDAYB":"pose_solution_simd_wasm_bin.1860836b.sj","1YWpo":"pose_solution_simd_wasm_bin.d19011cb.wasm","fkHNU":"pose_web.33901820.binarypb","eyiJB":"pose_solution_packed_assets.7bcfebcd.data","ikao0":"index.55a7195a.js","gFIxA":"index.bc6d0f78.js"}'))},{"8c44530950ae97e8":"fyJL2"}],fyJL2:[function(t,e,n){"use strict";var i={};e.exports.register=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)i[e[n]]=t[e[n]]},e.exports.resolve=function(t){var e=i[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}},{}],i3bKi:[function(t,e,n){var i=t("@parcel/transformer-js/src/esmodule-helpers.js"),o=t("url:./lib/pose_landmark_full.tflite"),r=i.interopDefault(o),a=t("url:./lib/pose_solution_packed_assets_loader.sj"),c=i.interopDefault(a),s=t("url:./lib/pose_solution_simd_wasm_bin.sj"),l=i.interopDefault(s),u=t("url:./lib/pose_solution_simd_wasm_bin.wasm"),f=i.interopDefault(u),d=t("url:./lib/pose_web.binarypb"),h=i.interopDefault(d),p=t("url:./lib/pose_solution_packed_assets.data"),g=i.interopDefault(p);const v=t("ea66598849cb82ac"),m=t("abae213465d90f39"),y=t("8378efacf790fde1"),b=t("e9f265167481edaf"),w=(t("53a55919f0445073"),loadConfig("kick",config)),x={start:"START",waiting_kick:"WAITING_KIK",goal:"GOAL",fail:"FAIL"};let _=!1;const j=document.getElementsByClassName("output_canvas")[0],k=j.getContext("2d"),C=document.getElementsByClassName("input_canvas")[0],S=C.getContext("2d");let E,L=j.height*w.game.triggerLineYPerc;const{controls:A,camera:O}=function(){const t=new y.Pose({locateFile:t=>{switch(t){case"pose_landmark_full.tflite":return r.default;case"pose_solution_packed_assets_loader.js":return c.default;case"pose_solution_simd_wasm_bin.js":return l.default;case"pose_solution_simd_wasm_bin.wasm":return f.default;case"pose_web.binarypb":return h.default;case"pose_solution_packed_assets.data":return g.default}return`https://cdn.jsdelivr.net/npm/@mediapipe/pose/${t}`}});t.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults(T);const e=document.getElementsByClassName("input_video")[0],n=new m.Camera(e,{onFrame:async()=>{S.drawImage(e,w.camera.sx,w.camera.sy,w.camera.sw,w.camera.sh,0,0,C.width,C.height),await t.send({image:C})},width:w.camera.size[0],height:w.camera.size[1]});return{controls:t,camera:n}}();function T(t){!function(t){if(M!=x.waiting_kick)return;let e=t.poseLandmarks[31].y*j.height,n=t.poseLandmarks[32].y*j.height;e>L&&n<=L&&J();n>L&&e<=L&&J()}(t),_&&(k.save(),k.clearRect(0,0,j.width,j.height),k.globalCompositeOperation="source-in",k.fillStyle="#00FF00",k.fillRect(0,0,j.width,j.height),k.globalCompositeOperation="destination-atop",k.drawImage(t.image,0,0,j.width,j.height),k.globalCompositeOperation="source-over",b.drawConnectors(k,t.poseLandmarks,y.POSE_CONNECTIONS,{color:"#00FF00",lineWidth:4}),b.drawLandmarks(k,t.poseLandmarks,{color:"#FF0000",lineWidth:2}),_&&(k.beginPath(),k.moveTo(0,L),k.lineTo(j.width,L),k.lineWidth=2,k.stroke()),k.restore())}X(),V("loader");var M=x.start;v.preload([resources.accuracyBarImg,resources.accuracyMovingObjectImg]);var I=void 0,R=void 0,F=void 0,P=void 0,B=void 0,U=void 0,D=void 0,H=!1;function N(t){I.clear(),I.blit(R,[0,0]),P[1]=function(t){if(H)return t;t>U?D=-1*w.game.movingObjectVelocity:t<B&&(D=1*w.game.movingObjectVelocity);return t+D}(P[1]),I.blit(F,P)}function W(){X(),M=x.start,V("idle-video"),V("start-text"),G("bar-container")}function z(){X(),H=!1,$("start-video"),Y("start-video",1),V("start-video"),V("bar-container"),M=x.waiting_kick}function K(){E=setTimeout((()=>{M!=x.waiting_kick&&M!=x.start&&W()}),w.winCooldownMs)}function q(t){setTimeout((()=>{G("bar-container")}),t)}function J(){var t,e;won=(t=P[1],e=t>=U-80&&t<=U+50,console.log(`Won by position: ${e}`),e),won?(X(),H=!0,$("goal-video"),Y("goal-video",1.2),V("goal-video"),q(1e3),H=!0,M=x.goal,K()):(X(),H=!0,$("fail-video"),Y("fail-video",1.2),V("fail-video"),q(1e3),M=x.fail,K())}function G(t){document.getElementById(t).setAttribute("style","display: none;")}function V(t){document.getElementById(t).setAttribute("style","")}function $(t){document.getElementById(t).load()}function Y(t,e){document.getElementById(t).playbackRate=e}function X(){G("idle-video"),G("start-video"),G("goal-video"),G("fail-video"),G("start-text")}document.addEventListener("keydown",(t=>{switch(t.code){case"KeyS":console.log("Pressed Start"),z();break;case"KeyK":case"KeyA":if(M!=x.waiting_kick)break;console.log("Kicking by key!!"),score=(e=2,Math.floor(Math.random()*e)),J();break;case"KeyR":M==x.waiting_kick||M==x.start?document.location="/":(z(),null!=E&&clearTimeout(E));break;case"KeyC":_?(G("camera_container"),_=!1):(V("camera_container"),_=!0);break;case"KeyP":configurator()}var e})),v.ready((function(){I=v.display.getSurface(),I.getSize(),R=v.image.load(resources.accuracyBarImg).scale(w.game.accuracyBarSize),F=v.image.load(resources.accuracyMovingObjectImg).scale(w.game.movingObjectSize),P=[-25,0],D=1*w.game.movingObjectVelocity,B=0,U=w.game.accuracyBarSize[1]-w.game.movingObjectSize[1],v.onTick((function(t){N()}))}));let Z=document.getElementById("idle-video");Z.addEventListener("loadeddata",(t=>{console.log(Z.readyState),Z.readyState>3&&A.initialize().then((()=>{O.start().then((()=>{setTimeout((()=>{var t;W(),t="loader",document.getElementById(t).remove()}),1e4)}))}))}))},{ea66598849cb82ac:"jD7I1",abae213465d90f39:"kbzBC","8378efacf790fde1":"cDzSQ",e9f265167481edaf:"dLTrj","53a55919f0445073":"iPBOi","url:./lib/pose_landmark_full.tflite":"evEmP","url:./lib/pose_solution_packed_assets_loader.sj":"b8qFr","url:./lib/pose_solution_simd_wasm_bin.sj":"cyEZ6","url:./lib/pose_solution_simd_wasm_bin.wasm":"58d3M","url:./lib/pose_web.binarypb":"fylxP","url:./lib/pose_solution_packed_assets.data":"2kX1t","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dLTrj:[function(t,e,n){var i=arguments[3];(function(){"use strict";function t(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i&&i];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(t,i){if(i)t:{var o=n;t=t.split(".");for(var r=0;r<t.length-1;r++){var a=t[r];if(!(a in o))break t;o=o[a]}(i=i(r=o[t=t[t.length-1]]))!=r&&null!=i&&e(o,t,{configurable:!0,writable:!0,value:i})}}function r(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}var a="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};function c(t){return t||Array.prototype.fill}o("Object.assign",(function(t){return t||a})),o("Array.prototype.fill",(function(t){return t||function(t,e,n){var i=this.length||0;for(0>e&&(e=Math.max(0,i+e)),(null==n||n>i)&&(n=i),0>(n=Number(n))&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}})),o("Int8Array.prototype.fill",c),o("Uint8Array.prototype.fill",c),o("Uint8ClampedArray.prototype.fill",c),o("Int16Array.prototype.fill",c),o("Uint16Array.prototype.fill",c),o("Int32Array.prototype.fill",c),o("Uint32Array.prototype.fill",c),o("Float32Array.prototype.fill",c),o("Float64Array.prototype.fill",c);var s=this||self;function l(t,e){t=t.split(".");var n,i=s;t[0]in i||void 0===i.execScript||i.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=e}var u={color:"white",lineWidth:4,radius:6,visibilityMin:.5};function f(t){return t=t||{},Object.assign({},u,{fillColor:t.color},t)}function d(t,e){return t instanceof Function?t(e):t}function h(t,e,n){return Math.max(Math.min(e,n),Math.min(Math.max(e,n),t))}l("clamp",h),l("drawLandmarks",(function(t,e,n){if(e){n=f(n),t.save();for(var i=t.canvas,o=0,a=(e=r(e)).next();!a.done;a=e.next())if(void 0!==(a=a.value)&&(void 0===a.visibility||a.visibility>n.visibilityMin)){t.fillStyle=d(n.fillColor,{index:o,from:a}),t.strokeStyle=d(n.color,{index:o,from:a}),t.lineWidth=d(n.lineWidth,{index:o,from:a});var c=new Path2D;c.arc(a.x*i.width,a.y*i.height,d(n.radius,{index:o,from:a}),0,2*Math.PI),t.fill(c),t.stroke(c),++o}t.restore()}})),l("drawConnectors",(function(t,e,n,i){if(e&&n){i=f(i),t.save();for(var o=t.canvas,a=0,c=(n=r(n)).next();!c.done;c=n.next()){var s=c.value;t.beginPath(),c=e[s[0]],s=e[s[1]],c&&s&&(void 0===c.visibility||c.visibility>i.visibilityMin)&&(void 0===s.visibility||s.visibility>i.visibilityMin)&&(t.strokeStyle=d(i.color,{index:a,from:c,to:s}),t.lineWidth=d(i.lineWidth,{index:a,from:c,to:s}),t.moveTo(c.x*o.width,c.y*o.height),t.lineTo(s.x*o.width,s.y*o.height)),++a,t.stroke()}t.restore()}})),l("drawRectangle",(function(t,e,n){n=f(n),t.save();var i=t.canvas;t.beginPath(),t.lineWidth=d(n.lineWidth,{}),t.strokeStyle=d(n.color,{}),t.fillStyle=d(n.fillColor,{}),t.translate(e.xCenter*i.width,e.yCenter*i.height),t.rotate(e.rotation*Math.PI/180),t.rect(-e.width/2*i.width,-e.height/2*i.height,e.width*i.width,e.height*i.height),t.translate(-e.xCenter*i.width,-e.yCenter*i.height),t.stroke(),t.fill(),t.restore()})),l("lerp",(function(t,e,n,i,o){return h(i*(1-(t-e)/(n-e))+o*(1-(n-t)/(n-e)),i,o)}))}).call(this)},{}],iPBOi:[function(t,e,n){var i=arguments[3];(function(){"use strict";function t(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i&&i];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(t,i){if(i)t:{var o=n;t=t.split(".");for(var r=0;r<t.length-1;r++){var a=t[r];if(!(a in o))break t;o=o[a]}(i=i(r=o[t=t[t.length-1]]))!=r&&null!=i&&e(o,t,{configurable:!0,writable:!0,value:i})}}function r(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function a(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function c(t){if(!(t instanceof Array)){t=a(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",(function(t){function n(t,n){this.g=t,e(this,"description",{configurable:!0,writable:!0,value:n})}if(t)return t;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(e||"")+"_"+o++,e)}})),o("Symbol.iterator",(function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var o="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<o.length;a++){var c=n[o[a]];"function"==typeof c&&"function"!=typeof c.prototype[i]&&e(c.prototype,i,{configurable:!0,writable:!0,value:function(){return r(t(this))}})}return i}));var s="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};function l(){this.l=!1,this.h=null,this.i=void 0,this.g=1,this.u=this.m=0,this.j=null}function u(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function f(t,e){t.j={K:e,L:!0},t.g=t.m||t.u}function d(t,e,n){return t.g=n,{value:e}}function h(t){this.g=new l,this.h=t}function p(t,e,n,i){try{var o=e.call(t.g.h,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return t.g.l=!1,o;var r=o.value}catch(e){return t.g.h=null,f(t.g,e),g(t)}return t.g.h=null,i.call(t.g,r),g(t)}function g(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(e){t.g.i=void 0,f(t.g,e)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.L)throw e.K;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function v(t){this.next=function(e){return u(t.g),t.g.h?e=p(t,t.g.h.next,e,t.g.o):(t.g.o(e),e=g(t)),e},this.throw=function(e){return u(t.g),t.g.h?e=p(t,t.g.h.throw,e,t.g.o):(f(t.g,e),e=g(t)),e},this.return=function(e){return function(t,e){u(t.g);var n=t.g.h;return n?p(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),g(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function m(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(i,o){!function t(r){r.done?i(r.value):Promise.resolve(r.value).then(e,n).then(t,o)}(t.next())}))}(new v(new h(t)))}function y(t){return t||Array.prototype.fill}o("Object.assign",(function(t){return t||s})),l.prototype.o=function(t){this.i=t},l.prototype.return=function(t){this.j={return:t},this.g=this.u},o("Promise",(function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function i(){this.g=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;i.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var r=n.setTimeout;i.prototype.i=function(t){r(t,0)},i.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.g=null},i.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.F),reject:t(this.l)}},e.prototype.F=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.H(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.D(t):this.m(t)}},e.prototype.D=function(t){var e=void 0;try{e=t.then}catch(t){return void this.l(t)}"function"==typeof e?this.I(e,t):this.m(t)},e.prototype.l=function(t){this.u(2,t)},e.prototype.m=function(t){this.u(1,t)},e.prototype.u=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.G(),this.C()},e.prototype.G=function(){var t=this;r((function(){if(t.N()){var e=n.console;void 0!==e&&e.error(t.i)}}),1)},e.prototype.N=function(){if(this.o)return!1;var t=n.CustomEvent,e=n.Event,i=n.dispatchEvent;return void 0===i||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=n.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,i(t))},e.prototype.C=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)c.h(this.g[t]);this.g=null}};var c=new i;return e.prototype.H=function(t){var e=this.j();t.v(e.resolve,e.reject)},e.prototype.I=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{o(t(e))}catch(t){r(t)}}:e}var o,r,a=new e((function(t,e){o=t,r=e}));return this.v(i(t,o),i(n,r)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.v=function(t,e){function n(){switch(i.h){case 1:t(i.i);break;case 2:e(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?c.h(n):this.g.push(n),this.o=!0},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),r=i.next();!r.done;r=i.next())o(r.value).v(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?o([]):new e((function(t,e){function r(e){return function(n){a[e]=n,0==--c&&t(a)}}var a=[],c=0;do{a.push(void 0),c++,o(i.value).v(r(a.length-1),e),i=n.next()}while(!i.done)}))},e})),o("Array.prototype.find",(function(t){return t||function(t,e){t:{var n=this;n instanceof String&&(n=String(n));for(var i=n.length,o=0;o<i;o++){var r=n[o];if(t.call(e,r,o,n)){t=r;break t}}t=void 0}return t}})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,o={next:function(){if(!i&&n<t.length){var o=n++;return{value:e(o,t[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}(this,(function(t){return t}))}})),o("Array.from",(function(t){return t||function(t,e,n){e=null!=e?e:function(t){return t};var i=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];if("function"==typeof o){t=o.call(t);for(var r=0;!(o=t.next()).done;)i.push(e.call(n,o.value,r++))}else for(o=t.length,r=0;r<o;r++)i.push(e.call(n,t[r],r));return i}})),o("Array.prototype.fill",(function(t){return t||function(t,e,n){var i=this.length||0;for(0>e&&(e=Math.max(0,i+e)),(null==n||n>i)&&(n=i),0>(n=Number(n))&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}})),o("Int8Array.prototype.fill",y),o("Uint8Array.prototype.fill",y),o("Uint8ClampedArray.prototype.fill",y),o("Int16Array.prototype.fill",y),o("Uint16Array.prototype.fill",y),o("Int32Array.prototype.fill",y),o("Uint32Array.prototype.fill",y),o("Float32Array.prototype.fill",y),o("Float64Array.prototype.fill",y),o("Object.values",(function(t){return t||function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(t[e]);return n}}));var b=this||self;function w(t,e){t=t.split(".");var n,i=b;t[0]in i||void 0===i.execScript||i.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=e}function x(t){this.g=_==_?t:""}x.prototype.toString=function(){return this.g.toString()};var _={};function j(t,e,n){if(t=document.createElement(t),e&&t.classList.add(e),n)for(n=(e=a(n)).next();!n.done;n=e.next())t.appendChild(n.value);return t}function k(t,e){return j("div",t,e)}function C(t,e){return j("span",t,e)}function S(t){var e=j("img","");return e.src=t||"",e}function E(t,e){var n=this;this.config=t,this.h={};var i,o=k("dropdown-wrapper",[i=k("dropdown",[k("dropdown-trigger",[this.g=C(),k("arrow")]),this.options=k("dropdown-options")])]);o.onclick=function(){t.B&&t.B(),i.classList.toggle("open"),i.g=function(){t.A&&t.A()}};for(var r={},c=a(t.options),s=c.next();!s.done;r={s:r.s},s=c.next())r.s=s.value,s=void 0,this.options.appendChild(s=C("dropdown-option")),this.h[r.s.value]=s,s.textContent=r.s.name,r.s.prefix&&s.prepend(r.s.prefix),s.setAttribute("data-value",r.s.value),s.onclick=function(t){return function(){L(n,t.s.value)}}(r);window.addEventListener("click",(function(t){i.contains(t.target)||i.classList.remove("open")})),e.appendChild(o)}function L(t,e){for(var n=a(t.config.options),i=n.next();!i.done;i=n.next()){i=i.value;var o=t.h[i.value];if(i.value===e&&!o.classList.contains("selected"))return(e=t.options.querySelector(".selected"))&&e.classList.remove("selected"),o.classList.add("selected"),t.g.textContent=o.textContent,t.config.onclick(i),!0}return!1}function A(t,e){var n=t.options.querySelector(".selected");n&&(n.classList.remove("selected"),t.g.textContent=void 0===e?"":e)}function O(t){this.config=t}function T(){this.i=this.counter=0,this.g=Array.from({length:10}).fill(0)}function M(t,e){t.g.shift(),t.g.push(e);var n=t.j;n.fillStyle="#309f93",n.clearRect(0,0,n.canvas.width,n.canvas.height);for(var i=0;10>i;++i){var o=Math.min(100,Math.max(0,t.g[i]));n.fillRect(10*i+1,100-o+1,8,o)}n.setLineDash([2,2]),n.strokeStyle="#a0a0a0a0",n.lineWidth=2,n.beginPath(),n.moveTo(0,30),n.lineTo(100,30),n.stroke(),n.beginPath(),n.moveTo(0,60),n.lineTo(100,60),n.stroke(),t.h.textContent=e.toFixed(0)+" fps"}function I(t){this.config=t}function R(t,e){e=t.config.discrete?Object.values(t.config.discrete)[e]:e,t.g.textContent=""+e}O.prototype.create=function(t,e,n){var i=this,o=n.appendChild(document.createElement("div"));o.classList.add("control-panel-entry"),o.classList.add("control-panel-slider"),(n=o.appendChild(document.createElement("span"))).classList.add("label"),n.textContent=this.config.title,n=new E({options:this.config.options.map((function(t){return Object.assign({},t,{data:null})})),B:function(){o.style.zIndex="1000"},onclick:function(n){e[i.config.field]=n.value,t(),i.config.onselectionchanged&&i.config.onselectionchanged(n)},A:function(){o.style.zIndex="100"}},o),0<this.config.options.length&&L(n,e[this.config.field]||this.config.options[0].value)},O.prototype.update=function(){},T.prototype.create=function(t,e,n){(e=n.appendChild(document.createElement("div"))).classList.add("control-panel-entry"),e.classList.add("control-panel-fps"),t=e.appendChild(document.createElement("canvas")),this.h=e.appendChild(document.createElement("div")),this.h.classList.add("fps-text"),(n=e.appendChild(document.createElement("div"))).classList.add("fps-30"),n.textContent="30",(e=e.appendChild(document.createElement("div"))).classList.add("fps-60"),e.textContent="60",t.width=100,t.height=100,this.j=t.getContext("2d"),M(this,0)},T.prototype.update=function(){},T.prototype.tick=function(){var t=Math.floor(performance.now()/1e3);1<=t-this.i&&(M(this,this.counter),this.i=t,this.counter=0),++this.counter},I.prototype.create=function(t,e,n){var i=this;this.options=e,e=this.config,(n=n.appendChild(document.createElement("div"))).classList.add("control-panel-entry"),n.classList.add("control-panel-slider");var o=n.appendChild(document.createElement("span"));o.classList.add("label"),(this.g=n.appendChild(document.createElement("span"))).classList.add("callout");var r=this.h=n.appendChild(document.createElement("input"));r.classList.add("value"),r.type="range",e.range?(r.min=""+e.range[0],r.max=""+e.range[1],r.step=void 0===e.step?"any":""+e.step):e.discrete&&(r.min="0",r.max=""+(Object.keys(e.discrete).length-1),r.step="1"),r.oninput=function(){R(i,Number(r.value))},r.onchange=function(){var e=Number(r.value);i.config.discrete&&(e=Object.keys(i.config.discrete)[e],Array.isArray(i.config.discrete)&&(e=Number(e))),i.options[i.config.field]=e,t()},o.textContent=e.title},I.prototype.update=function(){var t=this.options[this.config.field];t=this.config.discrete&&!Array.isArray(this.config.discrete)?Object.keys(this.config.discrete).indexOf(t):t,this.h.value=""+t,R(this,t)};var F={facingMode:"user",width:640,height:480},P={allowVideo:!0,allowImage:!0,examples:{videos:[],images:[]}};function B(t){return"https://fonts.gstatic.com/s/i/googlematerialicons/"+t+"/v8/white-24dp/1x/gm_"+t+"_white_24dp.png"}function U(t){this.j=[],this.u=0,this.l=!1,this.aspectRatio=0,this.config=Object.assign({},P,t),this.config.cameraOptions=Object.assign({},F,t.cameraOptions||{})}function D(){var t,e,n,i,o;return m((function(r){switch(r.g){case 1:return t=[],d(r,function(){var t,e,n;return m((function(i){switch(i.g){case 1:return d(i,navigator.mediaDevices.enumerateDevices(),2);case 2:if(i.i.filter((function(t){return"videoinput"===t.kind&&t.label})).length){i.g=3;break}return i.m=4,d(i,navigator.mediaDevices.getUserMedia({video:!0}),6);case 6:for(t=i.i,e=a(t.getTracks()),n=e.next();!n.done;n=e.next())n.value.stop();!function(t){t.g=3,t.m=0}(i);break;case 4:return function(t){t.m=0,t.j=null}(i),i.return(!1);case 3:return i.return(!0)}}))}(),2);case 2:if(!r.i){r.g=3;break}return d(r,navigator.mediaDevices.enumerateDevices(),4);case 4:for(e=r.i,n=a(e),i=n.next();!i.done;i=n.next())""!==(o=i.value).label&&"videoinput"===o.kind&&t.push({label:o.label,deviceId:o.deviceId});case 3:return r.return(t)}}))}function H(t){window.requestAnimationFrame((function(){t.tick()}))}function N(t,e){e=0!==t.aspectRatio?function(t,e){var n=t.getVideoTracks()[0],i=n.getSettings().width,o=n.getSettings().height,r=i/o;if(1e-6>Math.abs(r-e))return t;if(r>e)var a=o,c=2*Math.floor(o*e/2);else c=i,a=2*Math.floor(i/e/2);return t=new MediaStreamTrackProcessor({track:n}),e=new MediaStreamTrackGenerator({kind:"video"}),n=new TransformStream({transform:function(t,e){var n,r,s;return m((function(l){n=2*Math.floor((i-c)/4),r=2*Math.floor((o-a)/4),s=new VideoFrame(t,{visibleRect:{x:n,y:r,width:c,height:a}}),t.close(),e.enqueue(s),l.g=0}))}}),t.readable.pipeThrough(n).pipeTo(e.writable),new MediaStream([e])}(e,t.aspectRatio):e,t.i=e,t.video.srcObject=e,t.video.addEventListener("loadedmetadata",(function e(){t.video.play(),t.l=!0,H(t),t.video.removeEventListener("loadedmetadata",e)}))}function W(t){var e,n,i;return m((function(o){if(t.h.parent.style.display="none",t.l=!1,t.i){for(e=t.i.getTracks(),n=a(e),i=n.next();!i.done;i=n.next())i.value.stop();t.i=void 0}o.g=0}))}function z(t){var e,n,i,o,r,a,s,l,u;return m((function(f){return 1==f.g?d(f,D(),2):(e=f.i.map((function(e){return{label:e.label,type:"webcam",O:e,start:function(){return function(t,e){var n,i,o,r,a;return m((function(c){return 1==c.g?(i={video:Object.assign({},{deviceId:e.deviceId},null!=(n=t.config.cameraOptions)?n:{})},d(c,null==(o=t.config)||null==(a=(r=o).M)?void 0:a.call(r),2)):3!=c.g?d(c,W(t),3):c.return(navigator.mediaDevices.getUserMedia(i).then((function(n){var i,o;return N(t,n),null==(i=t.config)||null==(o=i.onSourceChanged)?void 0:o.call(i,e.deviceId,"webcam")})).catch((function(t){throw console.error("Failed to acquire camera feed: "+t),alert("Failed to acquire camera feed: "+t),t})))}))}(t,e)}}})),o=null==(n=t.config.examples)||null==(i=n.videos)?void 0:i.map((function(e){return{label:e.name,type:"video",video:t.video,start:function(){J(t,e.src)}}})),s=null==(r=t.config.examples)||null==(a=r.images)?void 0:a.map((function(e){return{label:e.name,type:"image",image:t.g,start:function(){q(t,e.src)}}})),f.return([].concat(c(e),c(null!=(l=o)?l:[]),c(null!=(u=s)?u:[]))))}))}function K(t,e){var n,i;return m((function(o){return 1==o.g?d(o,null==(i=(n=t.config).M)?void 0:i.call(n),2):3!=o.g?d(o,W(t),3):d(o,e.start(),0)}))}function q(t,e){t.g.onload=function(){return m((function(e){return t.config.onFrame?e=d(e,K(t,{label:"file",type:"image",image:t.g,start:function(){return m((function(e){return d(e,function(t,e){var n,i,o,r,a;return m((function(c){return 1==c.g?d(c,null==(i=(n=t.config).onFrame)?void 0:i.call(n,e,{width:e.naturalWidth,height:e.naturalHeight}),2):c.return(null==(o=t.config)||null==(a=(r=o).onSourceChanged)?void 0:a.call(r,e.src,"image"))}))}(t,t.g),0)}))}}),0):(e.g=0,e=void 0),e}))},t.g.src=e}function J(t,e){t.video.addEventListener("loadedmetadata",(function e(){return m((function(n){if(1==n.g)return t.video.loop=!0,t.config?n=d(n,K(t,{label:"file",type:"video",video:t.video,start:function(){return function(t){var e,n,i;return m((function(o){return 1==o.g?(t.h.parent.style.display="flex",V(t,0),d(o,t.video.play(),2)):(t.C(),t.l=!0,H(t),o.return(null==(e=t.config)||null==(i=(n=e).onSourceChanged)?void 0:i.call(n,t.video.src,"video")))}))}(t)}}),2):(n.g=2,n=void 0),n;t.video.removeEventListener("loadedmetadata",e),n.g=0}))})),t.video.srcObject=null,t.video.src=e}function G(t,e){L(t.m,e.label)||A(t.m)}function V(t,e){var n=t.h.J,i=t.h.track.getBoundingClientRect();t=t.h.parent.getBoundingClientRect(),n.style.left=i.left-t.left+i.width*e+"px"}function $(t){this.config=t}function Y(t){this.config=t}function X(t,e){var n=this;this.parent=t,this.options=e,this.i=[],this.h=!0,t=[k("hamburger-menu"),k("hamburger-menu"),k("hamburger-menu")];var i=k("control-panel-shell",[this.g=k("control-panel"),this.l=k("control-panel-expander",t)]);this.l.onclick=function(){n.h=!n.h,i.style.left=n.h?"0px":"-"+(i.offsetLeft+n.g.offsetLeft+n.g.offsetWidth-15)+"px",i.classList.toggle("control-panel-expanded")},this.parent.appendChild(i)}function Z(t){for(var e=a(t.i),n=e.next();!n.done;n=e.next())n.value.update();t.j&&t.j(t.options)}U.prototype.tick=function(){var t=this,e=null;this.l&&(this.video.paused||this.video.currentTime===this.u||(this.i||(V(this,this.video.currentTime/this.video.duration),this.h.time.textContent=function(t){var e=Math.floor(t%60).toString();return e=1===e.length?"0"+e:e,t=Math.floor(t/60).toString(),t=1===t.length?"0"+t:t,t+":"+e}(this.video.currentTime)),this.u=this.video.currentTime,e=this.config.onFrame?this.config.onFrame(this.video,{width:this.video.videoWidth,height:this.video.videoHeight}):null),e?e.then((function(){H(t)})):H(this))},U.prototype.setVideoCameraAspectRatio=function(t){this.aspectRatio=t,this.i&&N(this,this.i)},U.prototype.create=function(t,e,n){var i=this,o=this.o=n.appendChild(document.createElement("div"));o.classList.add("control-panel-entry"),o.classList.add("control-panel-source-picker");var r=k("source-selection");o.append(r),z(this).then((function(t){var e,n;i.j=t,function(t,e){t.m=new E({options:t.j.map((function(t){var e=void 0;return"image"===t.type?e=S("https://fonts.gstatic.com/s/i/googlematerialicons/image/v12/gm_grey-24dp/1x/gm_image_gm_grey_24dp.png"):"video"===t.type&&(e=S("https://fonts.gstatic.com/s/i/googlematerialicons/videocam/v12/gm_grey-24dp/1x/gm_videocam_gm_grey_24dp.png")),{name:t.label,value:t.label,data:t,prefix:e}})),onclick:function(e){t.h.parent.style.display="none",(e=e.data).start(),window.localStorage.setItem("SOURCE_PICKER_LAST_SOURCE",e.label)},B:function(){t.o.style.zIndex="2000"},A:function(){t.o.style.zIndex="100"}},e)}(i,r),function(t,e){var n=e.appendChild(document.createElement("input"));n.type="file",n.style.display="none",e.appendChild(C("file-selection",[e=k("",[S(B("file_upload"))])])),e.onclick=function(){n.click()},n.onchange=function(){var e,i,o,r,a,c;return m((function(s){if(e=n.files,null!=(i=e)&&i.length){var l;if(o=e[0],r=o.type.toLowerCase(),a=r.substring(0,r.indexOf("/")),(l="undefined"!=typeof MediaSource&&o instanceof MediaSource)||(l=2===(null==(l=o.type.match(/^([^;]+)(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i))?void 0:l.length)&&(/^image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon|heic|heif)$/i.test(l[1])||/^video\/(?:mpeg|mp4|ogg|webm|x-matroska|quicktime|x-ms-wmv)$/i.test(l[1])||/^audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)$/i.test(l[1]))),!l)throw Error("");l=new x(URL.createObjectURL(o)),c=l.toString(),"image"===a?(A(t.m,o.name),q(t,c)):"video"===a&&(A(t.m,o.name),J(t,c))}s.g=0}))}}(i,r),(t=r.appendChild(document.createElement("div"))).classList.add("inputs"),i.video=t.appendChild(document.createElement("video")),i.video.setAttribute("crossorigin","anonymous"),i.video.setAttribute("playsinline","true"),i.g=t.appendChild(document.createElement("img")),i.g.setAttribute("crossorigin","anonymous"),null==(n=(e=i.config).onVideoElementCreated)||n.call(e,i.video),function(t,e){var n,i,o,r,a=B("pause"),c=B("play_arrow");e.append(o=k("video-controls",[r=S(a),i=k("video-track"),n=k("video-slider-ball"),e=C("video-time")])),t.h={parent:o,J:n,track:i,time:e},e.textContent="00:00",n.style.display="inline-block",n.onmousedown=function(e){function r(){e.preventDefault(),document.removeEventListener("mousemove",a),c||t.video.play(),document.removeEventListener("mouseup",r)}function a(r){e.preventDefault();var a=o.getBoundingClientRect(),c=n.getBoundingClientRect(),s=i.getBoundingClientRect();(r=r.clientX-a.left-c.width/2)<(a=s.left-a.left)?r=a:r>a+s.width&&(r=a+s.width),n.style.left=r+"px",t.video.currentTime=(r-a)/s.width*t.video.duration}e.preventDefault();var c=t.video.paused;t.video.pause(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)},r.onclick=function(){t.video.paused?(t.video.play(),r.src=a):(t.video.pause(),r.src=c)},t.C=function(){t.video.paused&&(r.src=c),r.src=a}}(i,o),function(t){var e=window.localStorage.getItem("SOURCE_PICKER_LAST_SOURCE"),n=t.j.find((function(t){return t.label===e}));n?G(t,n):0<t.j.length&&G(t,t.j[0])}(i)}))},U.prototype.update=function(){this.g&&!this.l&&this.config.onFrame&&this.config.onFrame(this.g,{width:this.g.naturalWidth,height:this.g.naturalHeight})},$.prototype.create=function(t,e,n){(t=n.appendChild(document.createElement("div"))).classList.add("control-panel-entry"),t.classList.add("control-panel-text"),t.textContent=this.config.title},$.prototype.update=function(){},Y.prototype.create=function(t,e,n){var i=this;this.h=t,this.options=e,this.g=n.appendChild(document.createElement("div")),this.g.classList.add("control-panel-entry"),this.g.classList.add("control-panel-toggle"),this.g.onclick=function(){i.options[i.config.field]=!i.options[i.config.field],i.h()},(t=this.g.appendChild(document.createElement("span"))).classList.add("label"),this.value=this.g.appendChild(document.createElement("span")),this.value.classList.add("value"),t.textContent=this.config.title},Y.prototype.update=function(){this.options[this.config.field]?(this.value.textContent="Yes",this.g.classList.add("yes"),this.g.classList.remove("no")):(this.value.textContent="No",this.g.classList.add("no"),this.g.classList.remove("yes"))},X.prototype.add=function(t){for(var e=this,n=(t=a(t)).next();!n.done;n=t.next())n=n.value,this.i.push(n),n.create((function(){Z(e)}),this.options,this.g);return Z(this),this},X.prototype.on=function(t){return this.j=t,Z(this),this},w("ControlPanel",X),w("Slider",I),w("StaticText",$),w("Toggle",Y),w("SourcePicker",U),w("FPS",T),w("DropDownControl",O)}).call(this)},{}],evEmP:[function(t,e,n){e.exports=t("eade9be018c07c41").getBundleURL("8jT0s")+"../"+t("c00f6f4b1267cb9a").resolve("7EvNo")},{eade9be018c07c41:"c7Tr5",c00f6f4b1267cb9a:"fyJL2"}],c7Tr5:[function(t,e,n){"use strict";var i={};function o(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n.getBundleURL=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return o(t[2])}return"/"}(),i[t]=e),e},n.getBaseURL=o,n.getOrigin=function(t){var e=(""+t).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!e)throw new Error("Origin not found");return e[0]}},{}],b8qFr:[function(t,e,n){e.exports=t("4fc82675d54f2b75").getBundleURL("8jT0s")+"../"+t("5df6fdd87f8af34d").resolve("1hXGG")},{"4fc82675d54f2b75":"c7Tr5","5df6fdd87f8af34d":"fyJL2"}],cyEZ6:[function(t,e,n){e.exports=t("1dc3f1c568a314d0").getBundleURL("8jT0s")+"../"+t("7cf9551e3321cc7e").resolve("eDAYB")},{"1dc3f1c568a314d0":"c7Tr5","7cf9551e3321cc7e":"fyJL2"}],"58d3M":[function(t,e,n){e.exports=t("4939f80c260a760a").getBundleURL("8jT0s")+"../"+t("21584726e6d83af0").resolve("1YWpo")},{"4939f80c260a760a":"c7Tr5","21584726e6d83af0":"fyJL2"}],fylxP:[function(t,e,n){e.exports=t("97b5dc09ea8e98f6").getBundleURL("8jT0s")+"../"+t("6bcbdd0831fde84c").resolve("fkHNU")},{"97b5dc09ea8e98f6":"c7Tr5","6bcbdd0831fde84c":"fyJL2"}],"2kX1t":[function(t,e,n){e.exports=t("b37ba80cb7781f6c").getBundleURL("8jT0s")+"../"+t("54753a5185b20612").resolve("eyiJB")},{b37ba80cb7781f6c:"c7Tr5","54753a5185b20612":"fyJL2"}]},["fFZjD","i3bKi"],"i3bKi","parcelRequire3fb3");
//# sourceMappingURL=index.b24d7188.js.map
