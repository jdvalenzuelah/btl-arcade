{"mappings":"AAGA,IAGIA,iBAIAC,eAPAC,eAAiB,QACjBC,eAAiB,EACjBC,cAAgB,EAEhBC,oBAAsB,GACtBC,oBAAsBD,oBACtBE,eAAiBC,YAAYC,oBAAqB,KAElDC,qBAAuB,IACvBC,cAAgBC,UAAUA,UA2C9B,SAASC,aACLC,QAAQC,IAAI,cACZb,eAAiB,QACjBC,eAAiB,EACjBa,eACAC,SAASC,QACb,CAEA,SAASC,gBACLC,aAAanB,gBACbY,YACJ,CAEA,SAASG,eACLK,SAASC,KAAKC,UAAY,+LAI9B,CAEA,SAASC,sBACL,GAAIrB,gBAAkBC,cAClBqB,qBADJ,CAIAC,uBACAZ,QAAQC,IAAI,uBAGZY,KAAK,cAGL,IAAIC,EAAyBC,KAAKC,MAAMD,KAAKE,SAAWpB,cAAcqB,QACtEhC,iBAAmBW,cAAciB,GACjCjB,cAAcsB,OAAOL,EAAwB,GAG1BP,SAASa,eAAe,iBAC9BX,UAAY,SACvBvB,iBAAiBmC,mCAEjBnC,iBAAiBoC,gBAInBC,KAAK,iBAGLA,KAAK,eAxBL,CAyBJ,CAEA,SAASC,kBACLxB,QAAQC,IAAI,mBACZY,KAAK,gBACLA,KAAK,iBACL1B,eAAiBsC,WAAWpB,cAAeT,sBAC3C2B,KAAK,cACLG,UAAU,cACVtC,eAAiB,WACjBC,eAAiB,CACrB,CAEA,SAASsC,kBACLd,KAAK,cACLA,KAAK,gBACLA,KAAK,iBACLU,KAAK,cACLpC,eAAiBsC,WAAWpB,cAAeT,sBAC3CR,eAAiB,WACjBC,eAAiB,CACrB,CAEA,SAASsB,iBACLxB,eAAiBsC,WAAWpB,cAAeT,sBAC3C2B,KAAK,aACLG,UAAU,aACVb,KAAK,iBACLA,KAAK,gBACLzB,eAAiB,WACjBC,eAAiB,CACrB,CAEA,SAASM,sBACDH,qBAAuB,IACvBmC,kBACAf,wBAEkB,eAAlBxB,iBACAmB,SAASa,eAAe,gBAAgBQ,MAAQpC,oBAChDA,qBAAuB,EAE/B,CAEA,SAASoB,uBACLpB,oBAAsBD,mBAC1B,CAEA,SAASsB,KAAKgB,GACVtB,SAASa,eAAeS,GACnBC,aAAa,QAAS,iBAC/B,CAEA,SAASP,KAAKM,GACVtB,SAASa,eAAeS,GACnBC,aAAa,QAAS,GAC/B,CAEA,SAASJ,UAAUG,GACftB,SAASa,eAAeS,GAAIE,MAChC,CAtJAxB,SAASyB,iBAAiB,WAAYC,IAClCjC,QAAQC,IAAI,mBAAmBb,kBAC/BY,QAAQC,IAAI,mBAAmBZ,kBAC/B,IAAI6C,EAAMD,EAAMC,IACLD,EAAME,KACN,KAAPD,GAAgC,SAAlB9C,eACdgD,OAAOjC,SAAW,IAEN,KAAP+B,GAAgC,SAAlB9C,eACnBW,aAEY,KAAPmC,GAAgC,SAAlB9C,gBACnBA,eAAiB,cACjBsB,uBAEuB,eAAlBtB,iBAC0B,KAA3BF,iBAAiBmD,QAAwB,KAAPH,GAIF,KAA3BhD,iBAAiBmD,QAAwB,KAAPH,GAIP,KAA3BhD,iBAAiBmD,QAAwB,KAAPH,GAIP,KAA3BhD,iBAAiBmD,QAAwB,KAAPH,GAXvC7C,gBAAkB,EAClBqB,uBAcKrB,gBAAkBC,cACvBqB,iBAGAa,kBAER,IACD","sources":["src/trivia/trivia.js"],"sourcesContent":["//Possible screens\n// START, IN_QUESTION, FINISHED\n\nvar current_screen = 'START'\nvar current_streak = 0\nvar streak_to_win = 3\nvar current_question\nvar time_per_question_s = 15\nvar question_timeleft_s = time_per_question_s;\nvar question_timer = setInterval(update_progress_bar, 1000);\nvar finish_timeout\nvar time_before_reset_ms = 60000\nvar question_list = questions.questions\n\ndocument.addEventListener('keydown', (event) => {\n    console.log(`current screen: ${current_screen}`)\n    console.log(`current streak: ${current_streak}`)\n    var key = event.key;\n    var code = event.code;\n    if (key == 'r' && current_screen == 'START') {\n        window.location = \"/\"\n    }\n    else if (key == 'r' && current_screen != 'START'){\n        reset_game()\n    }\n    else if (key == 's' && current_screen == 'START') {\n        current_screen = 'IN_QUESTION'\n        new_question_screen()\n    }\n    else if (current_screen == 'IN_QUESTION') {\n        if (current_question.answer == 'a' && key == 'a') {\n            current_streak += 1\n            new_question_screen()\n        }\n        else if (current_question.answer == 'b' && key == 'b') {\n            current_streak += 1\n            new_question_screen()\n        }\n        else if (current_question.answer == 'c' && key == 'c') {\n            current_streak += 1\n            new_question_screen()\n        }\n        else if (current_question.answer == 'd' && key == 'd') {\n            current_streak += 1\n            new_question_screen()\n        }\n        else if (current_streak >= streak_to_win) {\n            you_win_screen()\n        }\n        else {\n            you_lost_screen()\n        }\n    }\n}, false);\n\nfunction reset_game() {\n    console.log(\"reset game\")\n    current_screen = 'START'\n    current_streak = 0\n    start_screen()\n    location.reload()\n}\n\nfunction reset_by_time() {\n    clearTimeout(finish_timeout)\n    reset_game()\n}\n\nfunction start_screen() {\n    document.body.innerHTML = `\n    <div id=\"start-text\">Presiona \"Start\" para jugar</div>\n    <video id=\"background-video\" autoplay muted loop> <source src=\"assets/start_scene_720.mp4\" type=\"video/mp4\"> </video>\n    `\n}\n\nfunction new_question_screen() {\n    if (current_streak >= streak_to_win) {\n        you_win_screen()\n        return\n    }\n    reset_question_timer()\n    console.log(\"new_question_screen\")\n\n    // Hide Start text\n    hide(\"start-text\")\n\n    // Load new question\n    var current_question_index = Math.floor(Math.random() * question_list.length)\n    current_question = question_list[current_question_index]\n    question_list.splice(current_question_index, 1)\n\n    // Write new question text\n    var questionText = document.getElementById(\"question-text\")\n    questionText.innerHTML = `\n    ${current_question.text}\n    <br><br><br><br>\n    ${current_question.options}\n    `\n\n    // Show new question\n    show(\"question-text\")\n\n    // Add progress bar\n    show(\"progress-bar\")\n}\n\nfunction you_lost_screen() {\n    console.log(\"you lost screen\")\n    hide(\"progress-bar\")\n    hide(\"question-text\")\n    finish_timeout = setTimeout(reset_by_time, time_before_reset_ms)\n    show('lose-video')\n    loadVideo('lose-video')\n    current_screen = 'FINISHED'\n    current_streak = 0\n}\n\nfunction time_out_screen() {\n    hide(\"idle-video\")\n    hide(\"progress-bar\")\n    hide(\"question-text\")\n    show(\"lose-video\")\n    finish_timeout = setTimeout(reset_by_time, time_before_reset_ms)\n    current_screen = 'FINISHED'\n    current_streak = 0\n}\n\nfunction you_win_screen() {\n    finish_timeout = setTimeout(reset_by_time, time_before_reset_ms)\n    show('win-video')\n    loadVideo('win-video')\n    hide(\"question-text\")\n    hide(\"progress-bar\")\n    current_screen = 'FINISHED'\n    current_streak = 0\n}\n\nfunction update_progress_bar() {\n    if (question_timeleft_s <= 0) {\n        time_out_screen();\n        reset_question_timer()\n    }\n    if (current_screen == 'IN_QUESTION') {\n        document.getElementById(\"progress-bar\").value = question_timeleft_s;\n        question_timeleft_s -= 1;\n    }\n}\n\nfunction reset_question_timer() {\n    question_timeleft_s = time_per_question_s\n}\n\nfunction hide(id) {\n    document.getElementById(id)\n        .setAttribute('style', 'display: none;')\n}\n\nfunction show(id) {\n    document.getElementById(id)\n        .setAttribute('style', '')\n}\n\nfunction loadVideo(id) {\n    document.getElementById(id).load();\n}"],"names":["current_question","finish_timeout","current_screen","current_streak","streak_to_win","time_per_question_s","question_timeleft_s","question_timer","setInterval","update_progress_bar","time_before_reset_ms","question_list","questions","reset_game","console","log","start_screen","location","reload","reset_by_time","clearTimeout","document","body","innerHTML","new_question_screen","you_win_screen","reset_question_timer","hide","current_question_index","Math","floor","random","length","splice","getElementById","text","options","show","you_lost_screen","setTimeout","loadVideo","time_out_screen","value","id","setAttribute","load","addEventListener","event","key","code","window","answer"],"version":3,"file":"index.33291411.js.map"}