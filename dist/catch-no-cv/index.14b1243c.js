!function(t,e,s,i,a){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof n[i]&&n[i],l=o.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function h(e,s){if(!l[e]){if(!t[e]){var a="function"==typeof n[i]&&n[i];if(!s&&a)return a(e,!0);if(o)return o(e,!0);if(c&&"string"==typeof e)return c(e);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}d.resolve=function(s){var i=t[e][1][s];return null!=i?i:s},d.cache={};var f=l[e]=new h.Module(e);t[e][0].call(f.exports,d,f,f.exports,this)}return l[e].exports;function d(t){var e=d.resolve(t);return!1===e?{}:h(e)}}h.isParcelRequire=!0,h.Module=function(t){this.id=t,this.bundle=h,this.exports={}},h.modules=t,h.cache=l,h.parent=o,h.register=function(e,s){t[e]=[function(t,e){e.exports=s},{}]},Object.defineProperty(h,"root",{get:function(){return n[i]}}),n[i]=h;for(var r=0;r<e.length;r++)h(e[r]);if(s){var f=h(s);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof define&&define.amd&&define((function(){return f}))}}({fHF0U:[function(t,e,s){const i=t("486d97b34ecddc5e"),a=t("36cdfea7aa380bc8"),n=t("c950076686625279");const o=loadConfig("catch-no-cv",config);let l=!1;const c=new class{#t=function(){};#e=function(){};#s=new i.font.Font("200px monospace");constructor(t,e){this.config=t,this.resources=e,this.#i()}#i(){this.state={started:!1,elapsedMs:0,remainingLives:this.config.game.lives,background:void 0,catcher:void 0,lives:[],fallingItems:[],speed:this.config.game.fallSpeed.initial,score:0,level:1,itemsToSpawn:this.config.game.fallingItems.initial,lastItemSpawnLevelUp:1}}setup(){this.display=i.display.getSurface(),this.size=this.display.getSize(),this.background={bg:i.image.load(this.resources.background).scale(this.size)},this.state.background=this.background.bg}start(){if(this.state.started)return void console.warn("Game alredy started!");this.state.started=!0;let t=i.image.load(this.resources.catcher).scale(this.config.catcherSize);this.state.catcher={img:t,pos:[0,this.size[1]-300],mask:new a.Mask(t)};for(let t=0;t<this.state.remainingLives;t++){let e=this.config.livesSize[1]*t+400;this.state.lives.push({img:i.image.load(this.resources.lives).scale(this.config.livesSize),pos:[e,20]})}this.#a()}reset(){this.#i(),this.setup()}#n=(new Date).getTime();onTick(t){let e=(new Date).getTime(),s=e-this.#n;this.#n=e,s<15||(this.state.elapsedMs+=t,this.display.clear(),this.display.blit(this.state.background,[0,0]),this.display.blit(this.#s.render(`${this.state.score}`,"#fcecd3"),[this.size[0]-200,120]),this.state.started&&(this.state.lives&&this.state.lives.forEach((t=>{this.display.blit(t.img,t.pos)})),this.state.catcher&&this.display.blit(this.state.catcher.img,this.state.catcher.pos),this.state.fallingItems&&this.state.fallingItems.forEach(((t,e)=>{t.pos=n.add(t.pos,[0,this.state.speed]),this.display.blit(t.img,t.pos),this.#o(t.pos)&&(this.state.fallingItems.splice(e,1),this.#l(),this.state.remainingLives>0&&this.#a()),this.#c(t)&&(this.state.fallingItems.splice(e,1),this.state.score++,0===this.state.fallingItems.length&&this.#a())})),this.#h(),this.#r()))}#o(t){return t[1]>=this.size[1]}#c(t){if(this.state.catcher){let e=n.subtract(this.state.catcher.pos,t.pos);return this.state.catcher.mask.overlap(t.mask,e)}return!1}#l(){this.state.lives.length&&this.state.lives.splice(this.state.lives.length-1,1),this.state.remainingLives-=1,0===this.state.remainingLives&&this.#f()}#a(){if(!(this.state.fallingItems.length>=this.config.game.fallingItems.max))for(let t=0;t<this.state.itemsToSpawn;t++){if(this.state.fallingItems.length>=this.config.game.fallingItems.max)return;let t=this.resources.fallingItems[Math.floor(Math.random()*this.resources.fallingItems.length)],e=i.image.load(t).scale(this.config.fallingItemsSize);this.state.fallingItems.push({img:e,pos:[Math.floor(Math.random()*(this.size[0]-this.config.fallingItemsSize[0])),0],mask:new a.Mask(e)})}}#h(){let t=this.state.level*this.config.game.levelUpMs,e=this.state.level+1;this.state.elapsedMs>=t&&(this.state.level=e,this.state.speed=Math.min(this.state.speed+this.config.game.fallSpeed.step,this.config.game.fallSpeed.max)),this.state.level-this.state.lastItemSpawnLevelUp>=this.config.game.fallingItems.levelUpStep&&(this.state.lastItemSpawnLevelUp=e,this.state.itemsToSpawn=Math.min(this.state.itemsToSpawn+this.config.game.fallingItems.step,this.config.game.fallingItems.max))}#f(){this.started=!1,this.#t(),this.#i(),this.setup()}#r(){this.state.score>=this.config.game.winScore&&(this.started=!1,this.#e(),this.#i(),this.setup())}onDeath(t){this.#t=t}onWin(t){this.#e=t}moveCatcher(t){this.state.catcher&&(this.state.catcher.pos[0]=Math.floor(this.size[0]*(1-t)))}moveCatcherStep(t){if(this.state.catcher){let e=Math.min(Math.max(0,this.state.catcher.pos[0]+t),this.size[0]-this.config.catcherSize[0]);this.state.catcher.pos[0]=e}}moveCatcherMotion(t){this.display.rect.collidePoint(t)&&(this.state.catcher.pos[0]=Math.min(Math.max(0,t[0]),this.size[0]-this.config.catcherSize[0]))}}(o,resources);function h(t){document.getElementById(t).classList.add("hidden")}function r(t){document.getElementById(t).classList.remove("hidden")}function f(){l=!0,i.preload([resources.background,resources.catcher,resources.lives,...resources.fallingItems]),i.event.onKeyDown((function(t){t.key===i.event.K_LEFT&&c.moveCatcherStep(-20),t.key===i.event.K_RIGHT&&c.moveCatcherStep(20)})),i.event.onMouseMotion((function(t){c.moveCatcherMotion(t.pos)})),i.event.onTouchMotion((function(t){c.moveCatcherMotion(t.touches[0].pos)})),i.ready((function(){h("idle"),r("game"),i.onTick((function(t){c.onTick(t)})),c.onDeath((function(){r("lose"),h("game"),c.reset(),setTimeout((()=>{location.reload()}),config.loseCooldownMs)})),c.onWin((function(){r("win"),h("game"),c.reset(),l=!1,setTimeout((()=>{location.reload()}),o.winCooldownMs)})),c.reset(),c.start()}))}document.getElementById("start").addEventListener("click",(t=>{l||f()})),document.getElementById("start-text").addEventListener("click",(t=>{l||f()}))},{"486d97b34ecddc5e":"jD7I1","36cdfea7aa380bc8":"jFqhP",c950076686625279:"e2Uu7"}]},["fHF0U"],"fHF0U","parcelRequire3fb3");
//# sourceMappingURL=index.14b1243c.js.map
