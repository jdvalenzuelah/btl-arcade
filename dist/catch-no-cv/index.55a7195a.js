!function(t,e,n,i,r){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof o[i]&&o[i],s=a.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(e,n){if(!s[e]){if(!t[e]){var r="function"==typeof o[i]&&o[i];if(!n&&r)return r(e,!0);if(a)return a(e,!0);if(c&&"string"==typeof e)return c(e);var f=new Error("Cannot find module '"+e+"'");throw f.code="MODULE_NOT_FOUND",f}l.resolve=function(n){var i=t[e][1][n];return null!=i?i:n},l.cache={};var h=s[e]=new u.Module(e);t[e][0].call(h.exports,l,h,h.exports,this)}return s[e].exports;function l(t){var e=l.resolve(t);return!1===e?{}:u(e)}}u.isParcelRequire=!0,u.Module=function(t){this.id=t,this.bundle=u,this.exports={}},u.modules=t,u.cache=s,u.parent=a,u.register=function(e,n){t[e]=[function(t,e){e.exports=n},{}]},Object.defineProperty(u,"root",{get:function(){return o[i]}}),o[i]=u;for(var f=0;f<e.length;f++)u(e[f])}({jD7I1:[function(t,e,n){t("5a36313da44ba6fd");var i=t("facfceb65d742fea"),r=t("b0e8007a25532ac6").Callback,o=n,a={};n.thread=t("519192061fd00bd0"),!0===o.thread.inWorker?n.ready=function(e){t("519192061fd00bd0")._ready(),o.init(),e()}:n.ready=function(t){var e=null,n=null;function i(){if(n()<1||e()<1)return window.setTimeout(i,100);o.display.init(),o.image.init(),o.audio.init(),o.event.init(),o.math.random.init(),t()}return o.time.init(),window.setTimeout((function t(){if(!document.body)return window.setTimeout(t,50);n=o.image.preload(a);try{e=o.audio.preload(a)}catch(t){o.debug("Error loading audio files ",t)}window.setTimeout(i,50)}),13),function(){return n?.5*n()+.5*e():.1}},n.init=function(){var t={};return["time","display","image","audio","event"].forEach((function(e){try{o[e].init()}catch(n){t[e]=n.toString()}})),t};n.preload=function(e){var n=t("128f5debc8c9508"),i=window.$g&&window.$g.resourceBaseHref||document.location.href;e.forEach((function(t){a[t]=n.resolve(i,t)}),this)};n.onTick=function(t,e){n.time._CALLBACKS.push(new r(t,e))};var s=n.normalizeRectArguments=function(){var t=0,e=0,n=0,i=0;if(2===arguments.length)arguments[0]instanceof Array&&arguments[1]instanceof Array?(t=arguments[0][0],e=arguments[0][1],n=arguments[1][0],i=arguments[1][1]):(t=arguments[0],e=arguments[1]);else if(1===arguments.length&&arguments[0]instanceof Array)t=arguments[0][0],e=arguments[0][1],n=arguments[0][2],i=arguments[0][3];else if(1===arguments.length&&arguments[0]instanceof c)t=arguments[0].left,e=arguments[0].top,n=arguments[0].width,i=arguments[0].height;else{if(4!==arguments.length)throw new Error("not a valid rectangle specification");t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3]}return{left:t||0,top:e||0,width:n||0,height:i||0}},c=n.Rect=function(){var t=s.apply(this,arguments);return this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height,this};i.accessors(c.prototype,{bottom:{get:function(){return this.top+this.height},set:function(t){this.top=t-this.height}},right:{get:function(){return this.left+this.width},set:function(t){this.left=t-this.width}},center:{get:function(){return[this.left+this.width/2|0,this.top+this.height/2|0]},set:function(){var t=s.apply(this,arguments);this.left=t.left-this.width/2|0,this.top=t.top-this.height/2|0}},topleft:{get:function(){return[this.left,this.top]},set:function(){var t=s.apply(this,arguments);this.left=t.left,this.top=t.top}},bottomleft:{get:function(){return[this.left,this.bottom]},set:function(){var t=s.apply(this,arguments);this.left=t.left,this.bottom=t.top}},topright:{get:function(){return[this.right,this.top]},set:function(){var t=s.apply(this,arguments);this.right=t.left,this.top=t.top}},bottomright:{get:function(){return[this.right,this.bottom]},set:function(){var t=s.apply(this,arguments);this.right=t.left,this.bottom=t.top}},x:{get:function(){return this.left},set:function(t){this.left=t}},y:{get:function(){return this.top},set:function(t){this.top=t}}}),c.prototype.move=function(){var t=s.apply(this,arguments);return new c(this.left+t.left,this.top+t.top,this.width,this.height)},c.prototype.moveIp=function(){var t=s.apply(this,arguments);this.left+=t.left,this.top+=t.top},c.prototype.clip=function(t){return this.collideRect(t)?(this.left>=t.left&&this.left<t.right?e=this.left:t.left>=this.left&&t.left<this.right&&(e=t.left),this.right>t.left&&this.right<=t.right?i=this.right-e:t.right>this.left&&t.right<=this.right&&(i=t.right-e),this.top>=t.top&&this.top<t.bottom?n=this.top:t.top>=this.top&&t.top<this.bottom&&(n=t.top),this.bottom>t.top&&this.bottom<=t.bottom?r=this.bottom-n:t.bottom>this.top&&t.bottom<=this.bottom&&(r=t.bottom-n),new c(e,n,i,r)):new c(0,0,0,0);var e,n,i,r},c.prototype.union=function(t){var e,n,i,r;return e=Math.min(this.left,t.left),n=Math.min(this.top,t.top),i=Math.max(this.right,t.right)-e,r=Math.max(this.bottom,t.bottom)-n,new c(e,n,i,r)},c.prototype.inflate=function(t,e){var n=this.clone();return n.inflateIp(t,e),n},c.prototype.inflateIp=function(t,e){this.left-=Math.floor(t/2),this.top-=Math.floor(e/2),this.width+=t,this.height+=e},c.prototype.collidePoint=function(){var t=s.apply(this,arguments);return this.left<=t.left&&t.left<=this.right&&this.top<=t.top&&t.top<=this.bottom},c.prototype.collideRect=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},c.prototype.collideLine=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];var a=[[this.left,this.top],[this.left,this.bottom],[this.right,this.top],[this.right,this.bottom]].map((function(t){var e=t[0],a=t[1];return(o-i)*e+(n-r)*a+(r*i-n*o)})),s=!0,c=!0,u=!0;return a.forEach((function(t){t>0?c=!1:t<0?s=!1:0===t&&(u=!1)}),this),(!s&&!c||!u)&&!(n>this.right&&r>this.right||n<this.left&&r<this.left||i<this.top&&o<this.top||i>this.bottom&&o>this.bottom)},c.prototype.toString=function(){return["[",this.left,",",this.top,"]"," [",this.width,",",this.height,"]"].join("")},c.prototype.clone=function(){return new c(this)},n.event=t("f6cb93aab15939cd"),n.font=t("bd1ce2fe79d6724e"),n.http=t("aba59eacca6fe9e8"),n.image=t("eef3d1df43f5b90c"),n.audio=t("2773e8f76feb719e"),n.graphics=t("3ee2f02e81d6797c"),n.logging=t("315d74ea79e12880"),n.math={matrix:t("5a36313da44ba6fd"),vectors:t("9a522325aa1216b4"),angles:t("9499ea78b4183288"),binaryheap:t("b1ad473b923db77b"),random:t("4b4a8fe419f327f8"),noise:t("3abf2e34ce0c8345")},n.utils={arrays:t("6da5bb083c575b85"),objects:t("facfceb65d742fea"),uri:t("128f5debc8c9508"),strings:t("3cf0874a527a0e1f"),xml:t("49b3685c3e5378f9"),base64:t("4f6764034d2971a5")},n.display=t("54fb773c72f9ca72"),n.pathfinding=t("16b5e6ce97dee4a9"),n.tiledmap=t("7b67081238eafb8d"),n.time=t("77e355f39bb41a71"),n.pixelcollision=t("a366c8410fa881fb")},{"5a36313da44ba6fd":"6jvVW",facfceb65d742fea:"lU1bC",b0e8007a25532ac6:"cusX9","519192061fd00bd0":"jI97B","128f5debc8c9508":"dC6Ev",f6cb93aab15939cd:"3NMsx",bd1ce2fe79d6724e:"1Npv4",aba59eacca6fe9e8:"bXYlQ",eef3d1df43f5b90c:"77DU6","2773e8f76feb719e":"cm0Vy","3ee2f02e81d6797c":"hYpwc","315d74ea79e12880":"3a6Zo","9a522325aa1216b4":"e2Uu7","9499ea78b4183288":"8O8oA",b1ad473b923db77b:"63dl1","4b4a8fe419f327f8":"4jvYh","3abf2e34ce0c8345":"iVZk1","6da5bb083c575b85":"1sAUJ","3cf0874a527a0e1f":"61UPx","49b3685c3e5378f9":"2DZe4","4f6764034d2971a5":"UhSbk","54fb773c72f9ca72":"xUoc8","16b5e6ce97dee4a9":"f8T2Z","7b67081238eafb8d":"9wPH7","77e355f39bb41a71":"1FMF8",a366c8410fa881fb:"jFqhP"}],"6jvVW":[function(t,e,n){n.identity=function(){return[1,0,0,1,0,0]},n.add=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3],t[4]+e[4],t[5]+e[5],t[6]+e[6]]};var i=n.multiply=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]};n.translate=function(t,e,n){return i(t,[1,0,0,1,e,n])},n.rotate=function(t,e){var n=Math.sin(e),r=Math.cos(e);return i(t,[r,n,-n,r,0,0])},n.rotation=function(t){return Math.atan2(t[1],t[0])},n.scale=function(t,e){var n=e[0],r=e[1];return i(t,[n,0,0,r,0,0])}},{}],lU1bC:[function(t,e,n){n.extend=function(t,e){if(void 0===t)throw new Error("unknown subClass");if(void 0===e)throw new Error("unknown superClass");var n;(n=new Function).prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superClass=e.prototype,t.superConstructor=e},n.merge=function(){var t,e,n={};for(t=arguments.length;t>0;--t){var i=arguments[t-1];for(e in i)n[e]=i[e]}return n};var i=n.keys=function(t){if(Object.keys)return Object.keys(t);var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},r=n.accessor=function(t,e,n,i){void 0!==Object.defineProperty?Object.defineProperty(t,e,{get:n,set:i}):void 0!==Object.prototype.__defineGetter__&&(t.__defineGetter__(e,n),i&&t.__defineSetter__(e,i))};n.accessors=function(t,e){i(e).forEach((function(n){r(t,n,e[n].get,e[n].set)}))}},{}],cusX9:[function(t,e,n){(n.Callback=function(t,e){return this.fn=t,this.fnScope=e||{},this}).prototype.trigger=function(){this.fn.apply(this.fnScope,arguments)}},{}],jI97B:[function(t,e,n){var i=t("dfc82d91fa48893e"),r=t("4dcd4647f18b1b89"),o=t("8c2d2ae6e2e8379c").Callback,a=n._EVENTS={RESULT:1001,ALIVE:1002,LOG:1004},s=n.inWorker=void 0!==this.importScripts;n._ready=function(){self.onmessage=function(t){i.event._triggerCallbacks(t.data)},self.postMessage({type:a.ALIVE})},n.post=function(t){if(!s)throw new Error("gamejs.postMessage only available in a thread/worker module");self.postMessage({type:a.RESULT,data:t})},n._logMessage=function(){var t=[];Array.prototype.forEach.call(arguments,(function(e){t.push(e)})),self.postMessage({type:a.LOG,arguments:t})};var c=function(){__scripts.forEach((function(t){try{importScripts(t)}catch(t){}}))},u=function(t){var e=r.resolve(document.location.href,window.require.getModuleRoot()),n=[];Array.prototype.slice.apply(document.getElementsByTagName("script"),[0]).forEach((function(t){t.src&&n.push(t.src)}));var i=window.URL||window.webkitURL,o=c.toString();o=o.substring(o.indexOf("{")+1,o.lastIndexOf("}"));var a=new Blob(['var __scripts = ["'+n.join('","')+'"];',o,';self.require.setModuleRoot("'+e+'");','self.require.run("'+t+'");'],{type:"application/javascript"}),s=i.createObjectURL(a);return new Worker(s)};n.Worker=function(t){var e=this.id=function(t){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t+"@"+(e()+e())}(t),n=u(t),r=[],s=!1,c=this,f=[],h=[];function l(t,e){t.forEach((function(t){t.trigger(e)}))}return n.onmessage=function(t){t.data.type===a.ALIVE?(s=!0,r.forEach((function(t){c.post(t)}))):t.data.type===a.LOG?i.logging.log.apply(null,[e].concat(t.data.arguments)):l(f,t.data.data)},n.onerror=function(t){i.logging.error('Error in worker "'+e+'" line '+t.lineno+": ",t.message),l(h,{data:t.data,worker:c,event:t})},this.onEvent=function(t,e){f.push(new o(t,e))},this.onError=function(t,e){h.push(new o(t,e))},this.post=function(t){s?n.postMessage(t):r.push(t)},this}},{dfc82d91fa48893e:"jD7I1","4dcd4647f18b1b89":"dC6Ev","8c2d2ae6e2e8379c":"cusX9"}],dC6Ev:[function(t,e,n){var i=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),r=n.resolve=function(t,e){var n=o(t),i=o(e),r=n[1]+"://"+n[3];if(i[1])return e;n[4]&&(r=r+":"+n[4]);var s=n[5];if("/"!==e.charAt(0)){var c=s.lastIndexOf("/");s=s.substr(0,c+1)+e}else s=e;return r+a(s)},o=n.match=function(t){return t.match(i)},a=(n.makeRelative=function(t){var e=r(document.location.href,"./");return 0===t.indexOf(e)&&(t="./"+t.substring(e.length)),t},function(t){if(".."==t||"."==t)return"";var e,n=t.indexOf("/")>-1,i=t.split("/"),r=[];for(e=0;e<i.length;){var o=i[e++];"."==o?n&&e==i.length&&r.push(""):".."==o?((r.length>1||1!==r.length&&""!==r[0])&&r.pop(),n&&e==i.length&&r.push("")):(r.push(o),n=!0)}return r.join("/")})},{}],"3NMsx":[function(t,e,n){var i=t("9fb72e0756cb96b5"),r=(t("b7e1ed60544964").Callback,[]),o=n._triggerCallbacks=function(){var t=arguments;r.forEach((function(e){"all"!==e.type&&t[0].type!==e.type||e.callback.apply(e.scope,t)}))};n.onFullscreen=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.DISPLAY_FULLSCREEN_ENABLED}),r.push({callback:t,scope:e,type:n.DISPLAY_FULLSCREEN_DISABLED})},n.onEvent=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:"all"})},n.onDisplayResize=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.DISPLAY_RESIZE})},n.onMouseMotion=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.MOUSE_MOTION})},n.onMouseUp=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.MOUSE_UP})},n.onMouseDown=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.MOUSE_DOWN})},n.onTouchMotion=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.TOUCH_MOTION})},n.onTouchUp=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.TOUCH_UP})},n.onTouchDown=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.TOUCH_DOWN})},n.onKeyDown=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.KEY_DOWN})},n.onKeyUp=function(t,e){if("function"!=typeof t)throw new Error("Callback must be a function");r.push({callback:t,scope:e,type:n.KEY_UP})},n.K_UP=38,n.K_DOWN=40,n.K_RIGHT=39,n.K_LEFT=37,n.K_SPACE=32,n.K_BACKSPACE=8,n.K_TAB=9,n.K_ENTER=13,n.K_SHIFT=16,n.K_CTRL=17,n.K_ALT=18,n.K_ESC=27,n.K_0=48,n.K_1=49,n.K_2=50,n.K_3=51,n.K_4=52,n.K_5=53,n.K_6=54,n.K_7=55,n.K_8=56,n.K_9=57,n.K_a=65,n.K_b=66,n.K_c=67,n.K_d=68,n.K_e=69,n.K_f=70,n.K_g=71,n.K_h=72,n.K_i=73,n.K_j=74,n.K_k=75,n.K_l=76,n.K_m=77,n.K_n=78,n.K_o=79,n.K_p=80,n.K_q=81,n.K_r=82,n.K_s=83,n.K_t=84,n.K_u=85,n.K_v=86,n.K_w=87,n.K_x=88,n.K_y=89,n.K_z=90,n.K_KP1=97,n.K_KP2=98,n.K_KP3=99,n.K_KP4=100,n.K_KP5=101,n.K_KP6=102,n.K_KP7=103,n.K_KP8=104,n.K_KP9=105,n.NOEVENT=0,n.NUMEVENTS=32e3,n.DISPLAY_FULLSCREEN_ENABLED=300,n.DISPLAY_FULLSCREEN_DISABLED=301,n.DISPLAY_RESIZE=302,n.QUIT=0,n.KEY_DOWN=1,n.KEY_UP=2,n.MOUSE_MOTION=3,n.MOUSE_UP=4,n.MOUSE_DOWN=5,n.MOUSE_WHEEL=6,n.TOUCH_UP=7,n.TOUCH_DOWN=8,n.TOUCH_MOTION=9,n.USEREVENT=2e3,n.Event=function(){this.type=null,this.key=null,this.rel=null,this.button=null,this.pos=null},n.init=function(){var t=[];function e(t){var e=i._getCanvasOffset(),r=[t.clientX-e[0],t.clientY-e[1]];o({type:n.MOUSE_WHEEL,pos:r,delta:t.detail||-t.wheelDeltaY/40})}function r(t){for(var e=i._getCanvasOffset(),n=[],r=0;r<t.length;r++){var o=t.item(r);n.push({identifier:o.identifier,pos:[o.clientX-e[0],o.clientY-e[1]]})}return n}function a(t){var e=r(t.changedTouches);o({type:n.TOUCH_UP,touches:e})}var s=i._getCanvas();document.addEventListener("mousedown",(function(t){var e=i._getCanvasOffset();o({type:n.MOUSE_DOWN,pos:[t.clientX-e[0],t.clientY-e[1]],button:t.button,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey})}),!1),document.addEventListener("mouseup",(function(t){var e=i._getCanvasOffset();o({type:n.MOUSE_UP,pos:[t.clientX-e[0],t.clientY-e[1]],button:t.button,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey})}),!1),document.addEventListener("keydown",(function(t){var e=t.keyCode||t.which;o({type:n.KEY_DOWN,key:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey}),(i._hasFocus()&&!t.ctrlKey&&!t.metaKey&&(e>=n.K_LEFT&&e<=n.K_DOWN||e>=n.K_0&&e<=n.K_z||e>=n.K_KP1&&e<=n.K_KP9||e===n.K_SPACE||e===n.K_TAB||e===n.K_ENTER)||e===n.K_ALT||e===n.K_BACKSPACE)&&t.preventDefault()}),!1),document.addEventListener("keyup",(function(t){o({type:n.KEY_UP,key:t.keyCode,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey})}),!1),document.addEventListener("mousemove",(function(e){var r=i._getCanvasOffset(),a=[e.clientX-r[0],e.clientY-r[1]],s=[];t.length&&(s=[t[0]-a[0],t[1]-a[1]]),o({type:n.MOUSE_MOTION,pos:a,rel:s,buttons:null,timestamp:e.timeStamp,movement:[e.movementX||e.mozMovementX||e.webkitMovementX||0,e.movementY||e.mozMovementY||e.webkitMovementY||0]}),t=a}),!1),s.addEventListener("mousewheel",e,!1),s.addEventListener("DOMMouseScroll",e,!1),s.addEventListener("beforeunload",(function(t){o({type:n.QUIT})}),!1),s.addEventListener("touchstart",(function(t){i._getCanvasOffset();var e=r(t.changedTouches);o({type:n.TOUCH_DOWN,touches:e})}),!1),s.addEventListener("touchend",a,!1),s.addEventListener("touchcancel",a,!1),s.addEventListener("touchleave",a,!1),s.addEventListener("touchmove",(function(t){var e=r(t.changedTouches);o({type:n.TOUCH_MOTION,touches:e}),t.preventDefault()}),!1)}},{"9fb72e0756cb96b5":"xUoc8",b7e1ed60544964:"cusX9"}],xUoc8:[function(t,e,n){var i=t("2d63d62515365b26").Surface,r="gjs-canvas",o=null,a=n.DISABLE_SMOOTHING=2,s=n.FULLSCREEN=4,c=n.POINTERLOCK=8,u=0,f=n._getCanvas=function(){var t=document.getElementById(r);return t||((t=document.createElement("canvas")).setAttribute("id",r),document.body.appendChild(t)),t},h=function(e){var n={type:p()?t("667415c58a65653d").DISPLAY_FULLSCREEN_ENABLED:t("667415c58a65653d").DISPLAY_FULLSCREEN_DISABLED};p()&&u&c&&g(),t("667415c58a65653d")._triggerCallbacks(n)};function l(e){var n=f();o._canvas.width=n.clientWidth,o._canvas.height=n.clientHeight,t("667415c58a65653d")._triggerCallbacks({type:t("667415c58a65653d").DISPLAY_RESIZE})}n.hasPointerLock=function(){return!!(document.pointerLockElement||document.webkitFullscreenElement||document.mozFullscreenElement||document.mozFullScreenElement)},n.init=function(){var t=f();t.getAttribute("tabindex")||(t.setAttribute("tabindex",1),t.focus());var e=document.getElementById("gjs-loader");e&&(e.style.display="none");var n=document.getElementById(r);n&&(n.style.display="block"),window.addEventListener("resize",l,!1)};var p=n.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.webkitDisplayingFullscreen},d=function(t){var e=f();return e.requestFullScreen=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen,!!e.requestFullScreen&&(Element.ALLOW_KEYBOARD_INPUT?e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.requestFullScreen(),!0)},g=function(){var t=f();t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()};n._hasFocus=function(){return document.activeElement==f()},n.setMode=function(t,e){o=null;var n=f();if(n.width=n.clientWidth=t[0],n.height=n.clientHeight=t[1],(u=u||e)&c&&(u|=s),u&s){var i=function(){var t=document.getElementById("gjs-fullscreen-toggle");if(!t){(t=document.createElement("button")).innerHTML="Fullscreen",t.id="gjs-fullscreen-toggle";var e=f();e.parentNode.insertBefore(t,e),e.parentNode.insertBefore(document.createElement("br"),e)}return t}();i.removeEventListener("click",d,!1),i.addEventListener("click",d,!1),document.removeEventListener("fullScreenchange",h,!1),document.removeEventListener("webkitfullscreenchange",h,!1),document.removeEventListener("mozfullscreenchange",h,!1),document.addEventListener("fullscreenchange",h,!1),document.addEventListener("webkitfullscreenchange",h,!1),document.addEventListener("mozfullscreenchange",h,!1)}return m(t)},n.setCaption=function(t,e){document.title=t},n._isSmoothingEnabled=function(){return!(u&a)},n._getCanvasOffset=function(){var t=f().getBoundingClientRect();return[t.left,t.top]};var m=n.getSurface=function(t){if(null===o){var e=f();void 0===t&&(t=[e.clientWidth,e.clientHeight]),(o=new i(t))._canvas=e,o._canvas.width=t[0],o._canvas.height=t[1],o._context=e.getContext("2d"),u&a?o._noSmooth():o._smooth()}return o}},{"2d63d62515365b26":"hYpwc","667415c58a65653d":"3NMsx"}],hYpwc:[function(t,e,n){var i=t("38902a66c4b296a0"),r=i.Rect,o=t("adccbbf6211f7fbc"),a=t("97322e9c20230b10"),s=t("50671eacee9ce815"),c=n.Surface=function(){var t=i.normalizeRectArguments.apply(this,arguments),e=t.left,n=t.top;return 1==arguments.length&&arguments[0]instanceof r&&(e=t.width,n=t.height),this._matrix=a.identity(),this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=n,this._blitAlpha=1,this._context=this._canvas.getContext("2d"),i.display._isSmoothingEnabled()?this._smooth():this._noSmooth(),this};c.prototype._noSmooth=function(){this.context.mozImageSmoothingEnabled=!1,this.context.webkitImageSmoothingEnabled=!1},c.prototype._smooth=function(){this.context.mozImageSmoothingEnabled=!0,this.context.webkitImageSmoothingEnabled=!0},c.prototype.blit=function(t,e,n,i){var o,a;if(e instanceof r){o=e.clone();var s=t.getSize();o.width||(o.width=s[0]),o.height||(o.height=s[1])}else o=e&&e instanceof Array&&2==e.length?new r(e,t.getSize()):new r([0,0],t.getSize());if(i=i||"source-over",n instanceof r)a=n;else if(n&&n instanceof Array&&2==n.length){var c=t.getSize();a=new r(n,[c[0]-n[0],c[1]-n[1]])}else a=new r([0,0],t.getSize());if(isNaN(o.left)||isNaN(o.top)||isNaN(o.width)||isNaN(o.height))throw new Error("[blit] bad parameters, destination is "+o);this.context.save(),this.context.globalCompositeOperation=i,this.context.globalAlpha=t._blitAlpha,this.context.drawImage(t.canvas,a.left,a.top,a.width,a.height,o.left,o.top,o.width,o.height),this.context.restore()},c.prototype.getSize=function(){return[this.canvas.width,this.canvas.height]},c.prototype.getRect=function(){return new r([0,0],this.getSize())},c.prototype.fill=function(t,e){this.context.save(),this.context.fillStyle=t||"#000000",void 0===e&&(e=new r(0,0,this.canvas.width,this.canvas.height)),this.context.fillRect(e.left,e.top,e.width,e.height),this.context.restore()},c.prototype.clear=function(t){var e=this.getSize();t=t||new r(0,0,e[0],e[1]),this.context.clearRect(t.left,t.top,t.width,t.height)},o.accessors(c.prototype,{rect:{get:function(){return this.getRect()}},context:{get:function(){return this._context}},canvas:{get:function(){return this._canvas}}}),c.prototype.clone=function(){var t=new c(this.getRect());return t.blit(this),t},c.prototype.getAlpha=function(){return 1-this._blitAlpha},c.prototype.setAlpha=function(t){if(!(isNaN(t)||t<0||t>1))return this._blitAlpha=1-t,1-this._blitAlpha},c.prototype.getImageData=function(){var t=this.getSize();return this.context.getImageData(0,0,t[0],t[1])},n.line=function(t,e,n,i,r){var o=t.context;o.save(),o.beginPath(),o.strokeStyle=e,o.lineWidth=r||1,o.moveTo(n[0],n[1]),o.lineTo(i[0],i[1]),o.stroke(),o.restore()},n.lines=function(t,e,n,i,r){n=n||!1;var o=t.context;o.save(),o.beginPath(),o.strokeStyle=o.fillStyle=e,o.lineWidth=r||1,i.forEach((function(t,e){0===e?o.moveTo(t[0],t[1]):o.lineTo(t[0],t[1])})),n&&o.lineTo(i[0][0],i[0][1]),o.stroke(),o.restore()},n.circle=function(t,e,n,i,r){if(isNaN(i))throw new Error("[circle] radius required argument");if(!(n&&n instanceof Array))throw new Error("[circle] pos must be given & array"+n);var o=t.context;o.save(),o.beginPath(),o.strokeStyle=o.fillStyle=e,o.lineWidth=r||1,o.arc(n[0],n[1],i,0,2*Math.PI,!0),void 0===r||0===r?o.fill():o.stroke(),o.restore()},n.rect=function(t,e,n,i){var r=t.context;r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=e,isNaN(i)||0===i?r.fillRect(n.left,n.top,n.width,n.height):(r.lineWidth=i||1,r.strokeRect(n.left,n.top,n.width,n.height)),r.restore()},n.arc=function(t,e,n,i,r,o,a){var s=t.context;s.save(),s.beginPath(),s.strokeStyle=s.fillStyle=e,s.arc(n[0],n[1],o,i,r,!1),isNaN(a)||0===a?s.fill():(s.lineWidth=a||1,s.stroke()),s.restore()},n.polygon=function(t,e,n,i){var r=t.context;r.save(),r.fillStyle=r.strokeStyle=e,r.beginPath(),n.forEach((function(t,e){0===e?r.moveTo(t[0],t[1]):r.lineTo(t[0],t[1])})),r.closePath(),isNaN(i)||0===i?r.fill():(r.lineWidth=i||1,r.stroke()),r.restore()},n.quadraticCurve=function(t,e,n,i,r,o){if(!(n&&n instanceof Array))throw new Error("[quadratic_curve] startPos must be defined!");if(!(i&&i instanceof Array))throw new Error("[quadratic_curve] endPos must be defined!");if(!(r&&r instanceof Array))throw new Error("[quadratic_curve] controlPos must be defined!");var a=t.context;a.save(),a.fillStyle=a.strokeStyle=e,a.lineWidth=o||1,a.beginPath(),a.moveTo(n[0],n[1]),a.quadraticCurveTo(r[0],r[1],i[0],i[1]),a.stroke(),a.restore()},n.bezierCurve=function(t,e,n,i,r,o,a){if(!(n&&n instanceof Array))throw new Error("[bezier_curve] startPos must be defined!");if(!(i&&i instanceof Array))throw new Error("[bezier_curve] endPos must be defined!");if(!(r&&r instanceof Array))throw new Error("[bezier_curve] ct1Pos must be defined!");if(!(o&&o instanceof Array))throw new Error("[bezier_curve] ct2Pos must be defined!");var s=t.context;s.save(),s.fillStyle=s.strokeStyle=e,s.lineWidth=a||1,s.beginPath(),s.moveTo(n[0],n[1]),s.bezierCurveTo(r[0],r[1],o[0],o[1],i[0],i[1]),s.stroke(),s.restore()},c.prototype.rotate=function(t){var e=this.getSize(),n=t*Math.PI/180,i=e;if(t%360!=0){var r=this.getRect(),o=[[-r.width/2,r.height/2],[r.width/2,r.height/2],[-r.width/2,-r.height/2],[r.width/2,-r.height/2]].map((function(t){return s.rotate(t,n)})),u=o.map((function(t){return t[0]})),f=o.map((function(t){return t[1]})),h=Math.min.apply(Math,u),l=Math.max.apply(Math,u),p=Math.min.apply(Math,f);i=[l-h,Math.max.apply(Math,f)-p]}var d=new c(i),g=a.translate(this._matrix,e[0]/2,e[1]/2);g=a.rotate(g,n),g=a.translate(g,-e[0]/2,-e[1]/2);var m=[(i[0]-e[0])/2,(i[1]-e[1])/2];return d.context.save(),d.context.transform(g[0],g[1],g[2],g[3],g[4],g[5]),d.blit(this,m),d.context.restore(),d},c.prototype.scale=function(t){var e=t[0],n=t[1];if(e<=0||n<=0)throw new Error("[gamejs.transform.scale] Invalid arguments for height and width",[e,n]);var i=this.getSize(),r=e/i[0],o=n/i[1],s=new c([e,n]),u=(this._matrix.slice(0),a.scale(a.identity(),[r,o]));return s.context.save(),s.context.transform(u[0],u[1],u[2],u[3],u[4],u[5]),s.blit(this),s.context.restore(),s},c.prototype.flip=function(t,e){var n=this.getSize(),i=new c(n),r=1,o=1,a=0,s=0;return!0===t&&(r=-1,a=-n[0]),!0===e&&(o=-1,s=-n[1]),i.context.save(),i.context.scale(r,o),i.context.drawImage(this.canvas,a,s),i.context.restore(),i},n.blitArray=function(t,e){t.context.putImageData(e.imageData,0,0)};n.SurfaceArray=function(t){var e=null,n=null,r=null;return this.set=function(t,i,r){var o=4*t+i*e[0]*4;n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=void 0===r[3]?255:r[3]},this.get=function(t,i){var r=4*t+i*e[0]*4;return[n[r],n[r+1],n[r+2],n[r+3]]},this.surface=null,o.accessors(this,{surface:{get:function(){var t=new i.graphics.Surface(e);return t.context.putImageData(r,0,0),t}},imageData:{get:function(){return r}}}),this.getSize=function(){return e},t instanceof Array?(e=t,r=i.display.getSurface().context.createImageData(e[0],e[1]),n=r.data):(e=t.getSize(),r=t.getImageData(0,0,e[0],e[1]),n=r.data),this}},{"38902a66c4b296a0":"jD7I1",adccbbf6211f7fbc:"lU1bC","97322e9c20230b10":"6jvVW","50671eacee9ce815":"e2Uu7"}],e2Uu7:[function(t,e,n){var i=t("53557b8c2d3a5622");n.distance=function(t,e){return a(r(t,e))};var r=n.subtract=function(t,e){return[t[0]-e[0],t[1]-e[1]]},o=(n.add=function(t,e){return[t[0]+e[0],t[1]+e[1]]},n.multiply=function(t,e){return"number"==typeof e?[t[0]*e,t[1]*e]:[t[0]*e[0],t[1]*e[1]]});n.divide=function(t,e){if("number"==typeof e)return[t[0]/e,t[1]/e];throw new Error("only divide by scalar supported")};var a=n.len=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},s=n.unit=function(t){var e=a(t);return e?[t[0]/e,t[1]/e]:[0,0]};n.rotate=function(t,e){return e=i.normaliseRadians(e),[t[0]*Math.cos(e)-t[1]*Math.sin(e),t[0]*Math.sin(e)+t[1]*Math.cos(e)]};var c=n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]};n.angle=function(t,e){var n=t[0]*e[1]-t[1]*e[0];return Math.atan2(n,c(t,e))},n.truncate=function(t,e){return a(t)>e?o(s(t),e):t},n.centroid=function(){var t=Array.prototype.slice.apply(arguments,[0]),e=[0,0];t.forEach((function(t){e[0]+=parseInt(t[0],10),e[1]+=parseInt(t[1],10)}));var n=t.length;return[e[0]/n,e[1]/n]}},{"53557b8c2d3a5622":"8O8oA"}],"8O8oA":[function(t,e,n){n.normaliseDegrees=function(t){return(t%=360)<0&&(t+=360),t},n.normaliseRadians=function(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t},n.degrees=function(t){return t*(180/Math.PI)},n.radians=function(t){return t*(Math.PI/180)}},{}],"1Npv4":[function(t,e,n){var i=t("b07fc6b957134d41").Surface,r=t("b578cee5924d53e2"),o=n.Font=function(t,e){return this.sampleSurface=new i([10,10]),this.sampleSurface.context.font=t,this.sampleSurface.context.textAlign="start",this.sampleSurface.context.textBaseline="bottom",this.backgroundColor=e||!1,this};o.prototype.render=function(t,e){var n=this.size(t),r=new i(n),o=r.context;return o.save(),this.backgroundColor&&(o.fillStyle=this.backgroundColor,o.fillRect(0,0,r.rect.width,r.rect.height)),o.font=this.sampleSurface.context.font,o.textBaseline=this.sampleSurface.context.textBaseline,o.textAlign=this.sampleSurface.context.textAlign,o.fillStyle=o.strokeStyle=e||"#000000",o.fillText(t,0,r.rect.height,r.rect.width),o.restore(),r},o.prototype.size=function(t){return[this.sampleSurface.context.measureText(t).width,this.fontHeight]},r.accessors(o.prototype,{fontHeight:{get:function(){return 1.5*this.sampleSurface.context.measureText("M").width}}})},{b07fc6b957134d41:"hYpwc",b578cee5924d53e2:"lU1bC"}],bXYlQ:[function(require,module,exports){exports.Response=function(){throw this.getResponseHeader=function(t){},new Error("response class not instantiable")};var ajax=exports.ajax=function(t,e,n,i){n=n||null;var r=new XMLHttpRequest;return r.open(t,e,!1),i&&r.setRequestHeader("Accept",i),n instanceof Object&&(n=JSON.stringify(n),r.setRequestHeader("Content-Type","application/json")),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(n),r},get=exports.get=function(t){return ajax("GET",t)},post=exports.post=function(t,e,n){return ajax("POST",t,e,n)};function stringify(response){return eval("("+response.responseText+")")}function ajaxBaseHref(){return window.$g&&window.$g.ajaxBaseHref||"./"}exports.load=function(t){return stringify(get(ajaxBaseHref()+t))},exports.save=function(t,e,n){return stringify(post(ajaxBaseHref()+t,{payload:e},n))}},{}],"77DU6":[function(t,e,n){var i=t("7adeb08e3163cb53"),r={};n.load=function(t){var e;if("string"==typeof t){if(!(e=r[t]))throw new Error('Missing "'+t+'", gamejs.preload() all images before trying to load them.')}else e=t;var n=document.createElement("canvas");n.width=e.naturalWidth||e.width,n.height=e.naturalHeight||e.height;var o=n.getContext("2d");o.drawImage(e,0,0),e.getSize=function(){return[e.naturalWidth,e.naturalHeight]};var a=new i.graphics.Surface(e.getSize());return a._canvas=n,a._context=o,a},n.init=function(){},n.preload=function(t){var e,n=0,r=0;function a(){++n==r&&!1,n%10==0&&i.logging.debug("gamejs.image: preloaded  "+n+" of "+r)}function s(){o(this),a()}function c(){throw a(),new Error("Error loading "+this.src)}for(e in t){var u=e.toLowerCase();if(-1!=u.indexOf(".png")||-1!=u.indexOf(".jpg")||-1!=u.indexOf(".jpeg")||-1!=u.indexOf(".svg")||-1!=u.indexOf(".gif")){var f=new Image;f.addEventListener("load",s,!0),f.addEventListener("error",c,!0),f.src=t[e],f.gamejsKey=e,r++}}return r>0&&!0,function(){return r>0?n/r:1}};var o=function(t){r[t.gamejsKey]=t}},{"7adeb08e3163cb53":"jD7I1"}],cm0Vy:[function(t,e,n){t("4d4f77adff2e17fa");var i={},r=!1,o=8;function a(t){t instanceof Array||(t=[t]);document.location.href;t.forEach((function(t){i[t.gamejsKey]=t}))}n.setNumChannels=function(t){o=parseInt(t,10)||o},n.getNumChannels=function(){return o},n.init=function(){a(Array.prototype.slice.call(document.getElementsByTagName("audio"),0))},n.preload=function(t,e){var n=0,i=0;function o(){++i==n&&(r=!1)}function s(){a(this),o()}function c(){throw o(),new Error("Error loading "+this.src)}for(var u in t)if(-1!=u.indexOf("wav")||-1!=u.indexOf("ogg")||-1!=u.indexOf("webm")){n++;var f=new Audio;f.addEventListener("canplay",s,!0),f.addEventListener("error",c,!0),f.src=t[u],f.gamejsKey=u,f.load()}return n>0&&(r=!0),function(){return n>0?i/n:1}},n.isPreloading=function(){return r},n.Sound=function(t){var e;if(!(e="string"==typeof t?i[t]:t))throw new Error('Missing "'+t+'", gamejs.preload() all audio files before loading');for(var n=[],r=o;r-- >0;){var a=new Audio;a.preload="auto",a.loop=!1,a.src=e.src,n.push(a)}return this.play=function(t){n.some((function(e){return!(!e.ended&&!e.paused)&&(e.loop=!!t,e.play(),!0)}))},this.stop=function(){n.forEach((function(t){t.stop()}))},this.setVolume=function(t){n.forEach((function(e){e.volume=t}))},this.getVolume=function(){return n[0].volume},this.getLength=function(){return n[0].duration},this}},{"4d4f77adff2e17fa":"jD7I1"}],"3a6Zo":[function(t,e,n){var i=["debug","info","warn","error","fatal"],r=2,o=t("c298683a3e89e60a");n.setLogLevel=function(t){if("string"==typeof t&&i.indexOf(t))r=i.indexOf(t);else{if("number"!=typeof t)throw new Error("invalid logLevel ",t," Must be one of: ",i);r=t}return r};var a=n.log=function(){if(!0!==o.thread.inWorker){var t=Array.prototype.slice.apply(arguments,[0]);t.unshift(Date.now()),void 0!==window.console&&console.log.apply&&console.log.apply(console,t)}else o.thread._logMessage.apply(null,arguments)};n.debug=function(){r<=i.indexOf("debug")&&a.apply(this,arguments)},n.info=function(){r<=i.indexOf("info")&&a.apply(this,arguments)},n.warn=function(){r<=i.indexOf("warn")&&a.apply(this,arguments)},n.error=function(){r<=i.indexOf("error")&&a.apply(this,arguments)},n.fatal=function(){r<=i.indexOf("fatal")&&a.apply(this,arguments)}},{c298683a3e89e60a:"jD7I1"}],"63dl1":[function(t,e,n){var i=n.BinaryHeap=function(t){return this.content=[],this.scoreFunction=t,this};i.prototype.push=function(t){this.content.push(t),this.sinkDown(this.content.length-1)},i.prototype.pop=function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},i.prototype.remove=function(t){return this.content.some((function(e,n){if(e==t){var i=this.content.pop();return n!=this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n)),!0}return!1}),this)},i.prototype.size=function(){return this.content.length},i.prototype.sinkDown=function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},i.prototype.bubbleUp=function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=2*(t+1),a=o-1,s=null;if(a<e){var c=this.content[a];(r=this.scoreFunction(c))<i&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?i:r)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}},{}],"4jvYh":[function(t,e,n){var i=function(){var t=4022871197;return this.hash=function(e){var n;for(e=e.toString(),n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)},this.version="Mash 0.9",this},r=n.Alea=function(){var t=Array.prototype.slice.call(arguments),e=0,n=0,r=0,o=1;0!==t.length&&t[0]||(t=[Date.now()]);var a,s=new i;for(e=s.hash(" "),n=s.hash(" "),r=s.hash(" "),a=0;a<t.length;a++)(e-=s.hash(t[a]))<0&&(e+=1),(n-=s.hash(t[a]))<0&&(n+=1),(r-=s.hash(t[a]))<0&&(r+=1);return s=null,this.random=function(){var t=2091639*e+2.3283064365386963e-10*o;return e=n,n=r,r=t-(o=0|t)},this.integer=function(t,e){return t+parseInt(this.random()*(e-t+1),10)},this.vector=function(t,e){return[this.integer(t[0],e[0]),this.integer(t[1],e[1])]},this.choose=function(t){return t[this.integer(0,t.length-1)]},this},o=null;n.integer=function(t,e){return o.integer(t,e)};n.vector=function(t,e){return o.vector(t,e)},n.choose=function(t){return o.choose(t)},n.random=function(){return o.random()},n.init=function(t){o=new r(t)}},{}],iVZk1:[function(t,e,n){var i=n.Simplex=function(t){var e;for(void 0===t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[],e=0;e<256;e++)this.p[e]=Math.floor(256*t.random());for(this.perm=[],e=0;e<512;e++)this.perm[e]=this.p[255&e];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};i.prototype.dot=function(t,e,n){return t[0]*e+t[1]*n},i.prototype.get=function(t,e){var n,i,r=(t+e)*(.5*(Math.sqrt(3)-1)),o=Math.floor(t+r),a=Math.floor(e+r),s=(3-Math.sqrt(3))/6,c=(o+a)*s,u=t-(o-c),f=e-(a-c);u>f?(n=1,i=0):(n=0,i=1);var h=u-n+s,l=f-i+s,p=u-1+2*s,d=f-1+2*s,g=255&o,m=255&a,v=this.perm[g+this.perm[m]]%12,b=this.perm[g+n+this.perm[m+i]]%12,y=this.perm[g+1+this.perm[m+1]]%12,w=.5-u*u-f*f,E=.5-h*h-l*l,_=.5-p*p-d*d;return 70*((w<0?0:(w*=w)*w*this.dot(this.grad3[v],u,f))+(E<0?0:(E*=E)*E*this.dot(this.grad3[b],h,l))+(_<0?0:(_*=_)*_*this.dot(this.grad3[y],p,d)))},i.prototype.get3d=function(t,e,n){var i,r,o,a,s,c,u=(t+e+n)*(1/3),f=Math.floor(t+u),h=Math.floor(e+u),l=Math.floor(n+u),p=1/6,d=(f+h+l)*p,g=t-(f-d),m=e-(h-d),v=n-(l-d);g>=m?m>=v?(i=1,r=0,o=0,a=1,s=1,c=0):g>=v?(i=1,r=0,o=0,a=1,s=0,c=1):(i=0,r=0,o=1,a=1,s=0,c=1):m<v?(i=0,r=0,o=1,a=0,s=1,c=1):g<v?(i=0,r=1,o=0,a=0,s=1,c=1):(i=0,r=1,o=0,a=1,s=1,c=0);var b=g-i+p,y=m-r+p,w=v-o+p,E=g-a+2*p,_=m-s+2*p,S=v-c+2*p,x=g-1+.5,K=m-1+.5,A=v-1+.5,k=255&f,M=255&h,O=255&l,L=this.perm[k+this.perm[M+this.perm[O]]]%12,C=this.perm[k+i+this.perm[M+r+this.perm[O+o]]]%12,I=this.perm[k+a+this.perm[M+s+this.perm[O+c]]]%12,D=this.perm[k+1+this.perm[M+1+this.perm[O+1]]]%12,R=.6-g*g-m*m-v*v,P=.6-b*b-y*y-w*w,T=.6-E*E-_*_-S*S,U=.6-x*x-K*K-A*A;return 32*((R<0?0:(R*=R)*R*this.dot(this.grad3[L],g,m,v))+(P<0?0:(P*=P)*P*this.dot(this.grad3[C],b,y,w))+(T<0?0:(T*=T)*T*this.dot(this.grad3[I],E,_,S))+(U<0?0:(U*=U)*U*this.dot(this.grad3[D],x,K,A)))}},{}],"1sAUJ":[function(t,e,n){n.remove=function(t,e){return-1!==e.indexOf(t)?e.splice(e.indexOf(t),1):null},n.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=parseInt(Math.random()*(e+1),10),i=t[e];t[e]=t[n],t[n]=i}return t}},{}],"61UPx":[function(t,e,n){n.getCommonPrefix=function(t,e){if(null===t||null===e)return null;if(t.length>e.length&&0===t.indexOf(e))return e;if(e.length>t.length&&0===e.indexOf(t))return t;var n,i=Math.min(t.length,e.length);for(n=0;n<i;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,i)}},{}],"2DZe4":[function(t,e,n){n.Parser=function(){var t=new DOMParser;return this.parseFromString=function(e){return t.parseFromString(e,"text/xml")},this};var i=n.Document=function(t){if(!t||!t instanceof XMLDocument)throw new Error("Need a valid xmlDocument.");return this._xmlDocument=t,this};i.prototype.element=function(t){var e=this._xmlDocument.getElementsByTagName(t)[0];return e&&new i(e)||null},i.prototype.elements=function(t){var e=this._xmlDocument.getElementsByTagName(t);return Array.prototype.slice.apply(e,[0]).map((function(t){return new i(t)}))},i.prototype.attribute=function(t){var e=this._xmlDocument.getAttribute(t);if(null===(e=e?e.trim():null))return null;if("true"===e.toLowerCase())return!0;if("false"===e.toLowerCase())return!1;var n=parseInt(e,10),i=parseFloat(e,10);return isNaN(n)?e:i!==n?i:n},i.prototype.value=function(){return this._xmlDocument.nodeValue},i.prototype.children=function(){return Array.prototype.slice.apply(this._xmlDocument.childNodes,[0]).map((function(t){return new i(t)}))},i.fromString=function(t){var e=(new DOMParser).parseFromString(t,"text/xml");return new i(e)},i.fromURL=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-Type","text/xml"),e.overrideMimeType("text/xml"),e.send(),new i(e.responseXML)}},{}],UhSbk:[function(t,e,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=n.decode=function(t){var e,n,r,o,a,s,c=[],u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)e=i.indexOf(t.charAt(u++))<<2|(o=i.indexOf(t.charAt(u++)))>>4,n=(15&o)<<4|(a=i.indexOf(t.charAt(u++)))>>2,r=(3&a)<<6|(s=i.indexOf(t.charAt(u++))),c.push(String.fromCharCode(e)),64!=a&&c.push(String.fromCharCode(n)),64!=s&&c.push(String.fromCharCode(r));return c=c.join("")};n.decodeAsArray=function(t,e){e=e||1;var n,i,o=r(t),a=o.length/e,s=[];for(n=0;n<a;n++)for(s[n]=0,i=e-1;i>=0;--i)s[n]+=o.charCodeAt(n*e+i)<<(i<<3);return s}},{}],f8T2Z:[function(t,e,n){var i=t("3c72108107f33c00").BinaryHeap;function r(t){var e={};return this.store=function(n,i){e[t(n)]=i},this.find=function(n){return e[t(n)]},this}n.findRoute=function(t,e,n,s){var c=new i((function(e){void 0===e.score&&(e.score=t.estimatedDistance(e.point,n)+e.length);return e.score})),u=new r("function"==typeof t.hash?t.hash:a);function f(t){c.push(t),u.store(t.point,t)}function h(e){var n=u.find(e),i=p.length+t.actualDistance(p.point,e);(!n||n.length>i)&&(n&&c.remove(n),f({point:e,from:p,length:i}))}var l=Date.now(),p=null;f({point:e,from:null,length:0});for(var d="function"==typeof t.equals?t.equals:o;c.size()>0&&(!s||Date.now()-l<s);){if(p=c.pop(),d(n,p.point))return p;t.adjacent(p.point).forEach(h)}return null};var o=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a=function(t){return t[0]+"-"+t[1]},s=n.Map=function(){throw new Error("not instantiable, this is an interface")};s.prototype.adjacent=function(t){},s.prototype.equals=o,s.prototype.hash=a,s.prototype.estimatedDistance=function(t,e){return 1},s.prototype.actualDistance=function(t,e){return 1}},{"3c72108107f33c00":"63dl1"}],"9wPH7":[function(t,e,n){var i=t("2c90e1623e139e46"),r=(t("13d916a05b35648e"),t("aa3355bab596b3df")),o=t("b71437d400149f1e"),a=t("aca7b6766a01cbaa"),s=(n.Map=function(t){t=a.resolve(document.location.href,t);var e=r.Document.fromURL(t).element("map");if(this.tileWidth=e.attribute("tilewidth"),this.tileHeight=e.attribute("tileheight"),this.width=e.attribute("width"),this.height=e.attribute("height"),"orthogonal"!==e.attribute("orientation"))throw new Error("only orthogonol maps supported");return this.properties={},u(this.properties,e),this.tiles=new s(e,t),this.layers=c(e),this},n.Tile=function(){throw this.surface=null,this.properties=null,new Error("Can not be instantiated.")},n.TileSets=function(t,e){var n=[];this.getSurface=function(t){var e=this.getTile(t);return e&&e.surface||null},this.getProperties=function(t){var e=this.getTile(t);return e&&e.properties||{}},this.getTile=function(t){var e=null;return n.some((function(n,i){return n.firstGid<=t&&(e=n.tiles[t-n.firstGid],!0)}),this),e};var o=function(t){for(var n=[],r=t.attribute("tilewidth"),o=t.attribute("tileheight"),s=t.attribute("spacing")||0,c=t.element("image").attribute("source"),f=a.makeRelative(a.resolve(e,c)),h=i.image.load(f),l=t.elements("tile"),p=h.getSize(),d=new i.Rect([0,0],[r,o]),g=0,m=0;m+o<=p[1];){for(var v=0;v+r<=p[0];){var b=new i.graphics.Surface(r,o),y=new i.Rect([v,m],[r,o]);b.blit(h,d,y);var w={};l.some((function(t){if(t.attribute("id")===g)return u(w,t),!0}),this),n.push({surface:b,properties:w}),v+=r+s,g++}m+=o+s}return n};return t.elements("tileset").forEach((function(t){var i=t.attribute("firstgid"),s=t.attribute("source");s&&(t=r.Document.fromURL(a.resolve(e,s)).element("tileset"));n.push({tiles:o(t),firstGid:i})})),n.reverse(),this}),c=function(t){var e=[],n=t.attribute("width"),i=t.attribute("height");return t.elements("layer").forEach((function(t){for(var r=[],a=i;a-- >0;){var s=n;for(r[a]=[];s-- >0;)r[a][s]=0}(function(t){var e=t.element("data"),i=e.attribute("encoding"),r=e.attribute("compression"),a="";e.children().forEach((function(t){a+=t.value()}));var s=[];if("base64"===i){if(r)throw new Error("Compression of map data unsupported");s=o.decodeAsArray(a,4)}else{if("csv"!==i)throw new Error("individual tile format not supported");a.trim().split("\n").forEach((function(t){t.split(",",n).forEach((function(t){s.push(parseInt(t,10))}))}))}return s})(t).forEach((function(t,e){t&=1073741823,r[parseInt(e/n,10)][parseInt(e%n,10)]=t})),e.push({gids:r,opacity:t.attribute("opacity"),visible:t.attribute("visible"),properties:u({},t)})})),e},u=function(t,e){var n=e.element("properties");if(n)return n.elements("property").forEach((function(e){var n=e.attribute("name"),i=e.attribute("value");t[n]=i})),t},f=n.MapView=function(t){return this.timeout=0,this.layerViews=t.layers.map((function(e){return new h(e,{tileWidth:t.tileWidth,tileHeight:t.tileHeight,width:t.width,height:t.height,tiles:t.tiles})})),this.viewRect=new i.Rect([0,0],[t.width*t.tileWidth,t.height*t.tileWidth]),this.image=new i.graphics.Surface([this.viewRect.width,this.viewRect.height]),this.mapImage=this.image.clone(),this.redraw(),this};f.prototype.redraw=function(){this.layerViews.forEach((function(t){t.draw(this.mapImage)}),this)},f.prototype.draw=function(t,e){t.blit(this.mapImage,e||[0,0],this.viewRect)};var h=n.LayerView=function(t,e){return this.draw=function(t){t.blit(this.surface)},this.surface=new i.graphics.Surface(e.width*e.tileWidth,e.height*e.tileHeight),this.surface.setAlpha(t.opacity),t.gids.forEach((function(t,n){t.forEach((function(t,r){if(0!==t){var o=e.tiles.getSurface(t);o?this.surface.blit(o,new i.Rect([r*e.tileWidth,n*e.tileHeight],[e.tileWidth,e.tileHeight])):i.log("no gid ",t,n,r,"layer",n)}}),this)}),this),this}},{"2c90e1623e139e46":"jD7I1","13d916a05b35648e":"lU1bC",aa3355bab596b3df:"2DZe4",b71437d400149f1e:"UhSbk",aca7b6766a01cbaa:"dC6Ev"}],"1FMF8":[function(t,e,n){t("34c6025d0a642d6e").Callback;var i=null,r=n._CALLBACKS=[],o="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)||null,a=function(){s(),o(a)};n.init=function(){Date.now(),o?o(a):setInterval(s,10)};var s=function(){var t,e=Date.now();t=e-(i||e),r.forEach((function(e){e.trigger(t)})),i=e}},{"34c6025d0a642d6e":"cusX9"}],jFqhP:[function(t,e,n){var i=t("366a29db37409f8"),r=t("90bee87e5cac851e"),o=n.Mask=function(t,e){this._bits=[],e=e&&255-e||255;var n,i,r=t.getImageData().data,o=t.getSize();for(this.width=o[0],this.height=o[1],n=0;n<this.width;n++)for(this._bits[n]=[],i=0;i<this.height;i++)this._bits[n][i]=!1;for(n=0;n<r.length;n+=4){var a=parseInt(n/4/o[0],10),s=parseInt(n/4%o[0],10);r[n+3]>=e&&this.setAt(s,a)}};o.prototype.overlapRect=function(t,e){var n=this.rect,r=t.rect;if(e&&r.moveIp(e),!r.collideRect(n))return null;var o=Math.max(n.left,r.left),a=Math.min(n.right,r.right),s=Math.max(n.top,r.top),c=Math.min(n.bottom,r.bottom);return new i.Rect([o,s],[a-o,c-s])},o.prototype.overlap=function(t,e){var n=this.overlapRect(t,e);if(null===n)return!1;var i=this.rect,r=t.rect;e&&r.moveIp(e);var o,a;for(a=n.top;a<=n.bottom;a++)for(o=n.left;o<=n.right;o++)if(this.getAt(o-i.left,a-i.top)&&t.getAt(o-r.left,a-r.top))return!0;return!1},o.prototype.overlapArea=function(t,e){var n=this.overlapRect(t,e);if(null===n)return 0;var i=this.rect,r=t.rect;e&&r.moveIp(e);var o,a,s=0;for(a=n.top;a<=n.bottom;a++)for(o=n.left;o<=n.right;o++)this.getAt(o-i.left,a-i.top)&&t.getAt(o-r.left,a-r.top)&&s++;return s},o.prototype.overlapMask=function(t,e){var n=this.overlapRect(t,e);if(null===n)return 0;var r=this.rect,a=t.rect;e&&a.moveIp(e);var s,c,u=new o(new i.graphics.Surface([n.width,n.height]));for(c=n.top;c<=n.bottom;c++)for(s=n.left;s<=n.right;s++)this.getAt(s-r.left,c-r.top)&&t.getAt(s-a.left,c-a.top)&&u.setAt(s,c);return u},o.prototype.setAt=function(t,e){this._bits[t][e]=!0},o.prototype.getAt=function(t,e){return t=parseInt(t,10),e=parseInt(e,10),!(t<0||e<0||t>=this.width||e>=this.height)&&this._bits[t][e]},o.prototype.invert=function(){this._bits=this._bits.map((function(t){return t.map((function(t){return!t}))}))},o.prototype.getSize=function(){return[this.width,this.height]},r.accessors(o.prototype,{rect:{get:function(){return new i.Rect([0,0],[this.width,this.height])}},length:{get:function(){var t=0;return this._bits.forEach((function(e){e.forEach((function(e){e&&t++}))})),t}}})},{"366a29db37409f8":"jD7I1","90bee87e5cac851e":"lU1bC"}]},[],0,"parcelRequire3fb3");
//# sourceMappingURL=index.55a7195a.js.map
