{"mappings":"AAAA,MAAMA,WAAaC,WAAW,SAAUC,QACxC,IAAIC,YAAa,EACjB,MAAMC,QAAU,CACZC,MAAO,QACPC,QAAS,UACTC,IAAK,OAET,IAAIC,WAAaJ,QAAQC,MAEzBI,SAASC,iBAAiB,SAAUC,IAEhC,OAAQA,EAAMC,MACV,IAAK,OACGJ,YAAcJ,QAAQC,QACtBQ,QAAQC,IAAI,iBACZC,iBACAC,iBACAC,YAAYC,SAAU,KAE1B,MACJ,IAAK,OACGV,YAAcJ,QAAQC,MACtBc,OAAOC,SAAW,IAGlBC,aAEJ,MACJ,IAAK,OACDC,eACR,IAIJ,IAAIN,eAAiB,WACjBO,KAAK,kBACLC,KAAK,mBACLA,KAAK,gBACT,EAEIN,SAAW,WACXV,WAAaJ,QAAQE,QACrBmB,eAAiBC,KAAKC,IAAI,EAAKC,qBAC/Bf,QAAQC,IAAI,mBAAmBW,kBAC/BI,YAAcpB,SAASqB,eAAe,UACtCC,WAAa/B,WAAWgC,QAAQC,eAAiBR,eACjDS,cAAgBzB,SAASqB,eAAe,eACxCI,cAAcC,YAAc,GAAGT,KAAKU,MAAM,IAAMX,mBAChDI,YAAYQ,MAAMC,MAAQ,GAAGP,eACzB,IAAMN,gBAAkBzB,WAAWuC,KAAKC,cACxCC,UAER,EAEIA,SAAW,WACXjC,WAAaJ,QAAQG,IACrBiB,KAAK,mBACLA,KAAK,kBACLD,KAAK,iBACLmB,WAAWrB,WAAYrB,WAAWuC,KAAKI,aAC3C,EAEItB,WAAa,WACbD,SAASwB,QACb,EAEI7B,eAAiB,WAEZZ,aACDU,QAAQC,IAAI,sBACZX,YAAa,EACb0C,UAAUC,aAAaC,aAAa,CAAEC,OAAO,IACxCC,KAAKC,aACLC,MAAMC,uBAEXC,aAAelC,OAAOkC,cAAgBlC,OAAOmC,mBAC7CC,aAAe,IAAIF,aAG3B,EAEA,SAAS7B,KAAKgC,GACV/C,SAASqB,eAAe0B,GAAIC,aAAa,QAAS,iBACtD,CACA,SAASlC,KAAKiC,GACV/C,SAASqB,eAAe0B,GAAIC,aAAa,QAAS,GACtD","sources":["src/scream/scream.js"],"sourcesContent":["const gameConfig = loadConfig('scream', config)\nlet permission = false;\nconst screens = {\n    start: \"START\",\n    playing: \"PLAYING\",\n    win: \"WIN\",\n}\nlet gameScreen = screens.start\n\ndocument.addEventListener('keyup', (event) => {\n\n    switch (event.code) {\n        case 'KeyS':\n            if (gameScreen == screens.start) {\n                console.log(\"Pressed Start\")\n                startListening()\n                showGameScreen()\n                setInterval(playGame, 50)\n            }\n            break;\n        case 'KeyR':\n            if (gameScreen == screens.start) {\n                window.location = \"/\"\n            }\n            else {\n                reset_game()\n            }\n            break;\n        case 'KeyP':\n            configurator();\n    }\n\n})\n\nlet showGameScreen = function () {\n    show(\"game_container\")\n    hide(\"start_container\")\n    hide(\"win_container\")\n}\n\nlet playGame = function () {\n    gameScreen = screens.playing\n    imageWidthPerc = Math.min(1.0, getThrPercReached())\n    console.log(`imageWidthPerc: ${imageWidthPerc}`)\n    fillerImage = document.getElementById(\"filler\")\n    imageWidth = gameConfig.visuals.fillerMaxWidth * imageWidthPerc\n    textIndicator = document.getElementById(\"filler_text\")\n    textIndicator.textContent = `${Math.round(110 * imageWidthPerc)}%`\n    fillerImage.style.width = `${imageWidth}px`;\n    if (100 * imageWidthPerc >= gameConfig.game.winThreshold) {\n        win_game()\n    }\n}\n\nlet win_game = function () {\n    gameScreen = screens.win\n    hide(\"start_container\")\n    hide(\"game_container\")\n    show(\"win_container\")\n    setTimeout(reset_game, gameConfig.game.winTimeoutMs)\n}\n\nlet reset_game = function () {\n    location.reload()\n}\n\nlet startListening = function () {\n\n    if (!permission) {\n        console.log(\"Getting user media\")\n        permission = true;\n        navigator.mediaDevices.getUserMedia({ audio: true })\n            .then(listenAudio)\n            .catch(handleAudioNotAllowed);\n\n        AudioContext = window.AudioContext || window.webkitAudioContext;\n        audioContent = new AudioContext();\n    }\n\n};\n\nfunction hide(id) {\n    document.getElementById(id).setAttribute(\"style\", \"display: none;\");\n}\nfunction show(id) {\n    document.getElementById(id).setAttribute(\"style\", \"\");\n}"],"names":["gameConfig","loadConfig","config","permission","screens","start","playing","win","gameScreen","document","addEventListener","event","code","console","log","startListening","showGameScreen","setInterval","playGame","window","location","reset_game","configurator","show","hide","imageWidthPerc","Math","min","getThrPercReached","fillerImage","getElementById","imageWidth","visuals","fillerMaxWidth","textIndicator","textContent","round","style","width","game","winThreshold","win_game","setTimeout","winTimeoutMs","reload","navigator","mediaDevices","getUserMedia","audio","then","listenAudio","catch","handleAudioNotAllowed","AudioContext","webkitAudioContext","audioContent","id","setAttribute"],"version":3,"file":"index.d9dd46ef.js.map"}