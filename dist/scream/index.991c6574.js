var AudioContext,audioContent,audioDB=0;const gamegameConfig=loadConfig("scream",config);var sampleFreq=gameConfig.audio.sampleFreqMs;let debug=gameConfig.audio.debug,maxThreshold=gameConfig.audio.maxThresholdDB;var listenAudio=function(o){console.log("Running sound allowed");var e=audioContent.createMediaStreamSource(o),a=audioContent.createAnalyser();a.fftSize=1024,e.connect(a);var n=a.frequencyBinCount,t=new Uint8Array(n),u=function(){setTimeout(u,sampleFreq),a.getByteFrequencyData(t);for(var o=0,e=0;e<255;e++){var i=t[e];o+=i*i}var r=Math.sqrt(o/n);audioDB=Math.log(r)/Math.log(10)*20,audioDB=Math.max(audioDB,0),debug&&console.log(`Audio level at ${Math.floor(audioDB)} dB`)};u()},handleAudioNotAllowed=function(o){console.log("You must allow your microphone."),console.log(o)},getVolume=function(){return audioDB},getThrPercReached=function(){return audioDB/maxThreshold};
//# sourceMappingURL=index.991c6574.js.map
